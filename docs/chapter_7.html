<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.60">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <title>Глава 7. Три мини игры | Game Development with Ren’Py</title><meta name="description" content="Разработка новелл при помощи Ren`Py, TyranoBuilder и Twine">
    <link rel="preload" href="/book-game-development-renpy/assets/style-5e12265d.css" as="style"><link rel="stylesheet" href="/book-game-development-renpy/assets/style-5e12265d.css">
    <link rel="modulepreload" href="/book-game-development-renpy/assets/app-6c2260bc.js"><link rel="modulepreload" href="/book-game-development-renpy/assets/framework-5866ffd3.js"><link rel="modulepreload" href="/book-game-development-renpy/assets/chapter_7.html-09cf1c14.js"><link rel="modulepreload" href="/book-game-development-renpy/assets/chapter_7.html-6544df95.js"><link rel="prefetch" href="/book-game-development-renpy/assets/chapter_1.html-645da8b2.js" as="script"><link rel="prefetch" href="/book-game-development-renpy/assets/chapter_2.html-37ca180d.js" as="script"><link rel="prefetch" href="/book-game-development-renpy/assets/chapter_3.html-f9fb4639.js" as="script"><link rel="prefetch" href="/book-game-development-renpy/assets/chapter_4.html-2a8584c6.js" as="script"><link rel="prefetch" href="/book-game-development-renpy/assets/chapter_5.html-7a623780.js" as="script"><link rel="prefetch" href="/book-game-development-renpy/assets/chapter_6.html-8eea6981.js" as="script"><link rel="prefetch" href="/book-game-development-renpy/assets/chapter_8.html-9fbabd78.js" as="script"><link rel="prefetch" href="/book-game-development-renpy/assets/index.html-5078772a.js" as="script"><link rel="prefetch" href="/book-game-development-renpy/assets/sources.html-05473ec3.js" as="script"><link rel="prefetch" href="/book-game-development-renpy/assets/404.html-60b35caa.js" as="script"><link rel="prefetch" href="/book-game-development-renpy/assets/chapter_1.html-d38883d4.js" as="script"><link rel="prefetch" href="/book-game-development-renpy/assets/chapter_2.html-d53ec68c.js" as="script"><link rel="prefetch" href="/book-game-development-renpy/assets/chapter_3.html-639e9627.js" as="script"><link rel="prefetch" href="/book-game-development-renpy/assets/chapter_4.html-7ff325ef.js" as="script"><link rel="prefetch" href="/book-game-development-renpy/assets/chapter_5.html-430466c9.js" as="script"><link rel="prefetch" href="/book-game-development-renpy/assets/chapter_6.html-ed6fe2b9.js" as="script"><link rel="prefetch" href="/book-game-development-renpy/assets/chapter_8.html-56f403bb.js" as="script"><link rel="prefetch" href="/book-game-development-renpy/assets/index.html-ddcb35d5.js" as="script"><link rel="prefetch" href="/book-game-development-renpy/assets/sources.html-0901b785.js" as="script"><link rel="prefetch" href="/book-game-development-renpy/assets/404.html-87d54bd8.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/book-game-development-renpy/" class=""><!----><span class="site-name">Game Development with Ren’Py</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><!----><!--[--><!--]--><!----><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><!----><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><a href="/book-game-development-renpy/" class="sidebar-item sidebar-heading" aria-label="Разработка игр с помощью Ren’Py"><!--[--><!--]--> Разработка игр с помощью Ren’Py <!--[--><!--]--></a><!----></li><li><a href="/book-game-development-renpy/chapter_1.html" class="sidebar-item sidebar-heading" aria-label="Глава 1. Истории и как они создаются"><!--[--><!--]--> Глава 1. Истории и как они создаются <!--[--><!--]--></a><!----></li><li><a href="/book-game-development-renpy/chapter_2.html" class="sidebar-item sidebar-heading" aria-label="Глава 2. Древнее искусство интерактивной художественной литературы"><!--[--><!--]--> Глава 2. Древнее искусство интерактивной художественной литературы <!--[--><!--]--></a><!----></li><li><a href="/book-game-development-renpy/chapter_3.html" class="sidebar-item sidebar-heading" aria-label="Глава 3. Современные визуальные новеллы"><!--[--><!--]--> Глава 3. Современные визуальные новеллы <!--[--><!--]--></a><!----></li><li><a href="/book-game-development-renpy/chapter_4.html" class="sidebar-item sidebar-heading" aria-label="Глава 4. Знакомимся с Ren’Py, Twine и TyranoBuilder"><!--[--><!--]--> Глава 4. Знакомимся с Ren’Py, Twine и TyranoBuilder <!--[--><!--]--></a><!----></li><li><a href="/book-game-development-renpy/chapter_5.html" class="sidebar-item sidebar-heading" aria-label="Глава 5. Погружаемся глубже"><!--[--><!--]--> Глава 5. Погружаемся глубже <!--[--><!--]--></a><!----></li><li><a href="/book-game-development-renpy/chapter_6.html" class="sidebar-item sidebar-heading" aria-label="Глава 6. Запускаем на популярных платформах"><!--[--><!--]--> Глава 6. Запускаем на популярных платформах <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/book-game-development-renpy/chapter_7.html" class="router-link-active router-link-exact-active router-link-active sidebar-item sidebar-heading active" aria-label="Глава 7. Три мини игры"><!--[--><!--]--> Глава 7. Три мини игры <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/book-game-development-renpy/chapter_7.html#составляем-план" class="router-link-active router-link-exact-active sidebar-item" aria-label="Составляем план"><!--[--><!--]--> Составляем план <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/book-game-development-renpy/chapter_7.html#состав-персонажеи" class="router-link-active router-link-exact-active sidebar-item" aria-label="Состав персонажей"><!--[--><!--]--> Состав персонажей <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/book-game-development-renpy/chapter_7.html#локации" class="router-link-active router-link-exact-active sidebar-item" aria-label="Локации"><!--[--><!--]--> Локации <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/book-game-development-renpy/chapter_7.html#часть-i-начало-август-возвращается-в-ren-py" class="router-link-active router-link-exact-active sidebar-item" aria-label="Часть I: Начало &quot;Август возвращается&quot; в Ren’Py"><!--[--><!--]--> Часть I: Начало &quot;Август возвращается&quot; в Ren’Py <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/book-game-development-renpy/chapter_7.html#создание-проекта" class="router-link-active router-link-exact-active sidebar-item" aria-label="Создание проекта"><!--[--><!--]--> Создание проекта <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/book-game-development-renpy/chapter_7.html#настроика-персонажеи" class="router-link-active router-link-exact-active sidebar-item" aria-label="Настройка персонажей"><!--[--><!--]--> Настройка персонажей <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/book-game-development-renpy/chapter_7.html#переходы" class="router-link-active router-link-exact-active sidebar-item" aria-label="Переходы"><!--[--><!--]--> Переходы <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/book-game-development-renpy/chapter_7.html#изображения-для-персонажеи" class="router-link-active router-link-exact-active sidebar-item" aria-label="Изображения для персонажей"><!--[--><!--]--> Изображения для персонажей <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/book-game-development-renpy/chapter_7.html#подготовка-ассетов" class="router-link-active router-link-exact-active sidebar-item" aria-label="Подготовка ассетов"><!--[--><!--]--> Подготовка ассетов <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/book-game-development-renpy/chapter_7.html#в-бои" class="router-link-active router-link-exact-active sidebar-item" aria-label="В бой!"><!--[--><!--]--> В бой! <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/book-game-development-renpy/chapter_7.html#комментирование-кода" class="router-link-active router-link-exact-active sidebar-item" aria-label="Комментирование кода"><!--[--><!--]--> Комментирование кода <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/book-game-development-renpy/chapter_7.html#ваше-первое-меню" class="router-link-active router-link-exact-active sidebar-item" aria-label="Ваше первое меню"><!--[--><!--]--> Ваше первое меню <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/book-game-development-renpy/chapter_7.html#использование-условного-оператора" class="router-link-active router-link-exact-active sidebar-item" aria-label="Использование условного оператора"><!--[--><!--]--> Использование условного оператора <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/book-game-development-renpy/chapter_7.html#настроика-скорости-текста" class="router-link-active router-link-exact-active sidebar-item" aria-label="Настройка скорости текста"><!--[--><!--]--> Настройка скорости текста <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/book-game-development-renpy/chapter_7.html#обновляем-систему-инвентаря" class="router-link-active router-link-exact-active sidebar-item" aria-label="Обновляем систему инвентаря"><!--[--><!--]--> Обновляем систему инвентаря <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/book-game-development-renpy/chapter_7.html#добавляем-функции" class="router-link-active router-link-exact-active sidebar-item" aria-label="Добавляем функции"><!--[--><!--]--> Добавляем функции <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/book-game-development-renpy/chapter_7.html#система-частиц-с-snowblossom" class="router-link-active router-link-exact-active sidebar-item" aria-label="Система частиц с SnowBlossom"><!--[--><!--]--> Система частиц с SnowBlossom <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/book-game-development-renpy/chapter_7.html#случаиныи-диалог" class="router-link-active router-link-exact-active sidebar-item" aria-label="Случайный диалог"><!--[--><!--]--> Случайный диалог <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/book-game-development-renpy/chapter_7.html#стили-и-гиперссылки" class="router-link-active router-link-exact-active sidebar-item" aria-label="Стили и гиперссылки"><!--[--><!--]--> Стили и гиперссылки <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/book-game-development-renpy/chapter_7.html#добавляем-видео" class="router-link-active router-link-exact-active sidebar-item" aria-label="Добавляем видео"><!--[--><!--]--> Добавляем видео <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><li><a href="/book-game-development-renpy/chapter_8.html" class="sidebar-item sidebar-heading" aria-label="Глава 8. Рекламная стратегия"><!--[--><!--]--> Глава 8. Рекламная стратегия <!--[--><!--]--></a><!----></li><li><a href="/book-game-development-renpy/sources.html" class="sidebar-item sidebar-heading" aria-label="Источники"><!--[--><!--]--> Источники <!--[--><!--]--></a><!----></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="глава-7-три-мини-игры" tabindex="-1"><a class="header-anchor" href="#глава-7-три-мини-игры" aria-hidden="true">#</a> Глава 7. Три мини игры</h1><p>На основе рассмотренной в первой главе повести мы создадим визуальную новеллу на Ren’Py, Twine и TyranoBuilder под названием <em>&quot;Август возвращается&quot;</em>. В процессе создания предпочтение будет предоставлено больше Ren’Py.</p><p>Хотя вы можете написать свою собственную историю, однако, чтобы это сделать правильно, лучше сперва познакомьтесь, как происходит процесс превращения повести в игру.</p><h2 id="составляем-план" tabindex="-1"><a class="header-anchor" href="#составляем-план" aria-hidden="true">#</a> Составляем план</h2><p>Перед программированием, желательно составить план для вашего приключения, то есть сделать каталогизацию персонажей, определить сцены. Может показаться это лишним, но без этого не обойтись при работе в больших командах.</p><p>Сначала разложим повесть <em>&quot;Август возвращается&quot;</em> на блоки в виде таблиц. Так же вы можете воспользоваться другим методом визуализации для этих целей. Главное – не пропускать данный этап, во избежание негативных последствий при создании игры.</p><h3 id="состав-персонажеи" tabindex="-1"><a class="header-anchor" href="#состав-персонажеи" aria-hidden="true">#</a> Состав персонажей</h3><p>Начнем с персонажей (см. Таблицу 7-1). Если забыли про них, то вернитесь к первой главе книги.</p><p>В это же главе повторите материал про 12 архетипов личности Джозефа Кэмпбелла, некоторые из них будут использованы в создаваемой игре.</p><p><strong>Таблица 7-1.</strong> Главные герои</p><table><thead><tr><th>Герой</th><th>Роль/Архетип</th><th>Пол и Возраст</th><th>Внешний вид</th></tr></thead><tbody><tr><td><em><strong>Рон Легион-Смерти</strong></em></td><td>Главный герой (т. е. игрок)</td><td>Мужчина, около 30 лет</td><td>Среднего телосложения и роста, на вид физически подтянутый</td></tr><tr><td><em><strong>Мервин Попплуэлл</strong></em></td><td>Искатель</td><td>Мужчина, лет за 30</td><td>Худой, среднего роста, небрежно одетый</td></tr><tr><td><em><strong>Ройстон Медовая-Бабочка</strong></em></td><td>Мудрец</td><td>Мужчина, 50 лет</td><td>Крепкое телосложение, имеет обычный вид</td></tr><tr><td><em><strong>Клэр</strong></em></td><td>Правитель</td><td>Женщина, около 20 лет</td><td>Спортивное телосложение, среднего роста, модно одетая</td></tr><tr><td><em><strong>Человек в комбинезоне</strong></em></td><td>Бунтарь</td><td>Мужчина, без возраста</td><td>Спортивное телосложение, высокий, лысый с причудливым видом</td></tr><tr><td><em><strong>Рейн</strong></em></td><td>Любовник</td><td>Женщина, около 30 лет</td><td>Среднее телосложение, низкий рост, изящный вид</td></tr></tbody></table><h3 id="локации" tabindex="-1"><a class="header-anchor" href="#локации" aria-hidden="true">#</a> Локации</h3><p>В визуальных новеллах главное не количество локаций, а количество слов в повествовании. В среднем это от 10000 до 50000 слов.</p><blockquote><p>Примечание:</p><p>Игра, создаваемая в этой книге, не соответствует вышеуказанному правилу.</p></blockquote><p>По сравнению с каталогизацией персонажей, определиться с локациями событий в игре сложнее. Слишком малое количество портят атмосферу, а слишком много сбивают с толку игрока. Лучше всего начать с малого, определить основные элементы игры, после чего разделить их на более мелкие единицы (например, комнаты) (см. Таблицу 7-2).</p><p>Для построения истории мы воспользуемся такими понятиями как:</p><ul><li><strong>Сеттинг</strong> – это среда, в которой происходит действие, где определяются базовые свойства реальности. В нашем случае это общая тема, атмосфера происходящего (например, стиль фона).</li><li><strong>Место</strong>, обстоятельство и время при которых развиваются события. Здесь могут быть применены разные звуковые дорожки, задний фон.</li><li><strong>Комнаты</strong> – наименьшая единица локации игры, которые часто имеют связь между собой.</li></ul><p><strong>Таблица 7-2.</strong> Основные сеттинги и места повести &quot;Август возвращается&quot;</p><table><thead><tr><th>Сеттинг</th><th>Место</th><th>Пример описание комнаты</th></tr></thead><tbody><tr><td><em><strong>Офис</strong></em></td><td><em>Рабочее место Рона</em></td><td>Вы бездельничаете за рабочим столом, на котором среди стопок бумаг стоит персональный компьютер. Только наклейка с изображением женщины-киборга выделяет ваше рабочее место среди всех остальных.</td></tr><tr><td><em><strong>Офис</strong></em></td><td><em>Помещение, где храниться сотовый телефон</em></td><td>Поднявшись на верхний этаж, вы попадаете в заброшенную часть офиса со старой мебелью.</td></tr><tr><td><em><strong>Город</strong></em></td><td><em>Парк, Арка</em></td><td>Ночь, одинокая арка городского парка, статуи освещённые тусклым светом, только усиливают волнения и страх вызванный недавними событиями.</td></tr><tr><td><em><strong>Офис (Пожар)</strong></em></td><td><em>Рабочий стол Рона</em></td><td>Ад. Рабочее место Рона окутано огнём. Защищаясь портфелем, он ныряет в него.</td></tr><tr><td><em><strong>Город (Жилой район)</strong></em></td><td><em>Квартира Рона</em></td><td>Квартира главного героя становится не такой безопасной, когда из-за двери доносятся странные звуки.</td></tr><tr><td><em><strong>Город (Железнодорожный вокзал)</strong></em></td><td><em>Железнодорожный вокзал</em></td><td>Вы испуганный, лихорадочно просматриваете расписание движения поездов в поиске ближайшего, который готов к отправке.</td></tr><tr><td><em><strong>Поезд</strong></em></td><td><em>Поезд на север</em></td><td>Сидя в мягком сиденье поезда, женщина с черными волосами напротив вас сняла наушники, улыбнулась и представилась.</td></tr><tr><td><em><strong>Конечная станция</strong></em></td><td><em>Конечная станция</em></td><td>Пытаясь слиться с толпой, вас ловят за руку.</td></tr><tr><td><em><strong>Остров</strong></em></td><td><em>Остров</em></td><td>Вы высаживаетесь на острове, для вас это чужой мир. Холод проникает до дрожи костей. Корабль покидает причал, и вы остаетесь один на холодном северном ветре.</td></tr><tr><td><em><strong>Остров</strong></em></td><td><em>Бункер</em></td><td>Незаметное снаружи строение на удивление оказалось просторным, комфортным, с отличной мебелью. Это напоминало больше отель нежели бункер.</td></tr><tr><td><em><strong>Океан</strong></em></td><td><em>Судно</em></td><td>По правому борту без опознавательных знаков появляется второе судно. Вы начинаете паниковать.</td></tr><tr><td><em><strong>Север</strong></em></td><td><em>Аэропорт</em></td><td>Вы оказываетесь в международном аэропорту, заполненным огромным количеством людей. Возможность раствориться в толпе успокаивает вас.</td></tr><tr><td><em><strong>Город</strong></em></td><td><em>Аэропорт</em></td><td>Вас окружает беззаботная жизнь. Туристы, тянут свой багаж, но вы внутренне готовитесь к битве всей своей жизни.</td></tr><tr><td><em><strong>Город</strong></em></td><td><em>Резиденция президента</em></td><td>Нет времени любоваться городом. По вам открыли огонь, остается только бежать.</td></tr><tr><td><em><strong>Новый офис</strong></em></td><td><em>Новое рабочее место Рона</em></td><td>Прежде чем приступить к новым обязанностям, он с тяжестью в душе возвращает старый сотовый телефон в шкаф.</td></tr></tbody></table><p>Теперь разделим вышеупомянутые места на более мелкие эпизоды, а именно на комнаты. Давайте сперва это сделаем для сеттинга &quot;Офис&quot; (см. Таблицу 7-3).</p><p><strong>Таблица 7-3.</strong> Сеттинг &quot;Офис&quot; в повести &quot;Август возвращается&quot;</p><table><thead><tr><th>Сеттинг</th><th>Место</th><th>Комната</th><th>Связанные комнаты</th></tr></thead><tbody><tr><td><em><strong>Офис</strong></em></td><td><em>Рабочее место Рона</em></td><td><em>Рабочий стол Рона</em></td><td><em>Зона с питьевым фонтанчиком, Рабочий стол Ройстона</em></td></tr><tr><td></td><td></td><td><em>Зона с питьевым фонтанчиком</em></td><td><em>Рабочий стол Рона, Соседний рабочий стол</em></td></tr><tr><td></td><td></td><td><em>Соседний рабочий стол</em></td><td><em>Зона с питьевым фонтанчиком</em></td></tr><tr><td></td><td><em>Верхний этаж (т. е. место хранение телефона)</em></td><td><em>Рабочий стол Ройстона</em></td><td><em>Рабочий стол Рона, Шкаф для документов</em></td></tr><tr><td></td><td></td><td><em>Шкаф для документов</em></td><td><em>Рабочий стол Ройстона</em></td></tr></tbody></table><h4 id="сеттинг-i-офис" tabindex="-1"><a class="header-anchor" href="#сеттинг-i-офис" aria-hidden="true">#</a> <em>Сеттинг I. Офис</em></h4><p>Как вы, помните, наше приключение начинается с того, что Рон получает загадочное письмо от умершего коллеги, некоего Мервина Попплуэлла.</p><p>Замечания по обстановки в <strong>Офисе</strong>:</p><ul><li>Тон написания должен быть мрачным и зловещим.</li><li>Звуковое сопровождение — это рабочий шум офиса, звуки работающей аппаратуры, ксерокса, приглушенные голоса сотрудников, телефонный звонки и разговоры.</li></ul><h4 id="сеттинг-ii-город" tabindex="-1"><a class="header-anchor" href="#сеттинг-ii-город" aria-hidden="true">#</a> <em>Сеттинг II. Город</em></h4><p>Выполняя инструкцию из загадочного письма, мы идем по улицам города в направлении арки парка (см. Таблицу 7-4).</p><p><strong>Таблица 7-4.</strong> Сеттинг &quot;Город&quot; в повести &quot;Август возвращается&quot;</p><table><thead><tr><th>Сеттинг</th><th>Место</th><th>Комната</th><th>Связанные комнаты</th></tr></thead><tbody><tr><td><em><strong>Город</strong></em></td><td><em>Парк</em></td><td><em>Парк</em></td><td><em>Арка</em></td></tr><tr><td></td><td><em>Арка</em></td><td><em>Арка</em></td><td><em>Парк</em></td></tr><tr><td></td><td><em>Улица</em></td><td><em>Дорога мимо офиса</em></td><td><em>Арка</em></td></tr><tr><td></td><td></td><td><em>Увиденный пожар</em></td><td><em>Нет</em></td></tr></tbody></table><p>Замечание к дизайну <strong>Города</strong>:</p><ul><li>Тон письма по-прежнему должен быть зловещим.</li><li>Звук — это уличная суета: проезжающие мимо автомобили, шаги людей, разговоры по мобильным телефонам, и иногда сигнал работающего светофора.</li></ul><h4 id="сеттинг-iii-офис-пожар" tabindex="-1"><a class="header-anchor" href="#сеттинг-iii-офис-пожар" aria-hidden="true">#</a> <em>Сеттинг III. Офис (Пожар)</em></h4><p>Это один из опасных моментов в приключениях нашего главного героя. Рон решился вернуться в свой офис, но он оказался охвачен огнем (см. Таблицу 7-5). Не имея средств защиты, кроме портфеля, он бросается в жерло пожара.</p><p><strong>Таблица 7-5.</strong> Сеттинг &quot;Офис (Пожар)&quot; в повести &quot;Август возвращается&quot;</p><table><thead><tr><th>Сеттинг</th><th>Место</th><th>Комната</th><th>Связанные комнаты</th></tr></thead><tbody><tr><td><em><strong>Город</strong></em></td><td><em>Вход в офис со двора</em></td><td><em>Переулок</em></td><td><em>Пожарная лестница</em></td></tr><tr><td><em><strong>Офис (Пожар)</strong></em></td><td></td><td><em>Пожарная лестница</em></td><td><em>Помещение офиса</em></td></tr><tr><td></td><td></td><td><em>Помещение офиса</em></td><td><em>Рабочий стол Рона</em></td></tr><tr><td></td><td></td><td><em>Рабочий стол Рона</em></td><td><em>Соседний стол А</em></td></tr><tr><td></td><td></td><td><em>Соседний стол А</em></td><td><em>Рабочий стол Рона, Соседний стол Б</em></td></tr><tr><td></td><td></td><td><em>Соседний стол Б</em></td><td><em>Соседний стол А</em></td></tr></tbody></table><p>Замечания по обстановке в сеттинге <strong>Офис (Пожар)</strong>:</p><ul><li>Тон повествования должен выражать огорчение и растерянность главного героя.</li><li>Аудио сопровождение в данном сеттинге — это звуки пожарных машин, пламени и обрушения внутри здания.</li></ul><h4 id="сеттинг-iv-город-жилои-раион" tabindex="-1"><a class="header-anchor" href="#сеттинг-iv-город-жилои-раион" aria-hidden="true">#</a> <em>Сеттинг IV. Город (Жилой район)</em></h4><p>В этой точке сюжета Рон направляется домой. Но и здесь что-то происходит непонятное. Он слышит, странные звуки из своей квартиры. Рон чувствует интуицией, что если туда войдет, то уже никогда из неё не выйдет (см. Таблицу 7-6).</p><p><strong>Таблица 7-6.</strong> Сеттинг &quot;Город (Жилой район)&quot; в повести &quot;Август возвращается&quot;</p><table><thead><tr><th>Сеттинг</th><th>Место</th><th>Комната</th><th>Связанные комнаты</th></tr></thead><tbody><tr><td><em><strong>Город (Жилой район)</strong></em></td><td><em>Квартира Рона</em></td><td><em>Улица</em></td><td><em>Нет</em></td></tr><tr><td></td><td></td><td><em>Коридор</em></td><td><em>Улица</em></td></tr><tr><td></td><td></td><td><em>Дверь квартира Рона</em></td><td><em>Коридор, Квартира Рона</em></td></tr><tr><td></td><td></td><td><em>Квартира Рона</em></td><td><em>Нет</em></td></tr></tbody></table><p>Замечание к дизайну <strong>Город (Жилой район)</strong>:</p><ul><li>Написание в этой короткой, но напряженной сцене, должно передавать чувство обреченности.</li><li>Что касается аудио, то мы должны услышать эхо шагов и непривычные инопланетные звуки.</li></ul><h4 id="сеттинг-v-город-железнодорожныи-вокзал" tabindex="-1"><a class="header-anchor" href="#сеттинг-v-город-железнодорожныи-вокзал" aria-hidden="true">#</a> <em>Сеттинг V. Город (Железнодорожный вокзал)</em></h4><p>Теперь, находиться в городе стало опасно для жизни Рона, его нужно немедленно покинуть, из-за чего он как можно скорей пытается добраться до вокзала. Где Рон садится на первый поезд, идущий на север (см. Таблицу 7-7).</p><p><strong>Таблица 7-7.</strong> Сеттинг &quot;Город (Железнодорожный вокзал)&quot; в повести &quot;Август возвращается&quot;</p><table><thead><tr><th>Сеттинг</th><th>Место</th><th>Комната</th><th>Связанные комнаты</th></tr></thead><tbody><tr><td><em><strong>Город (Железнодорожный вокзал)</strong></em></td><td><em>Железнодорожный вокзал</em></td><td><em>Статуя</em></td><td><em>Платформа А</em></td></tr><tr><td></td><td></td><td><em>Платформа А</em></td><td><em>Статуя, Платформа Б</em></td></tr><tr><td></td><td></td><td><em>Платформа Б</em></td><td><em>Поезд</em></td></tr><tr><td></td><td></td><td><em>Поезд</em></td><td><em>Нет</em></td></tr></tbody></table><p>Замечание к дизайну <strong>Город (Железнодорожный вокзал)</strong>:</p><ul><li>Тон написания остаётся прежним. Рона преследуют, и он в панике.</li><li>Звук в этом сеттинге такой же, как и в городе, только сообщает о присутствии большого количества людей.</li></ul><h4 id="сеттинг-vi-поезд" tabindex="-1"><a class="header-anchor" href="#сеттинг-vi-поезд" aria-hidden="true">#</a> <em>Сеттинг VI. Поезд</em></h4><p>Зайдя в поезд, Рон немного успокаивается. Однако это спокойствие длится недолго, его продолжают преследовать (см. Таблицу 7-8). В результате он запирается в туалете, прячась от преследователей. В этот момент ему позвонили на старый мобильный телефон, и сказали покинуть поезд на ближайшей станции.</p><p><strong>Таблица 7-8.</strong> Сеттинг &quot;Поезд&quot; в повести &quot;Август возвращается&quot;</p><table><thead><tr><th>Сеттинг</th><th>Место</th><th>Комната</th><th>Связанные комнаты</th></tr></thead><tbody><tr><td><em><strong>Поезд</strong></em></td><td><em>Поезд на север</em></td><td><em>Двери поезда</em></td><td><em>Нет</em></td></tr><tr><td></td><td></td><td><em>Первый вагон</em></td><td><em>Второй вагон, Двери поезда</em></td></tr><tr><td></td><td></td><td><em>Второй вагон</em></td><td><em>Первый вагон</em></td></tr><tr><td></td><td></td><td><em>Туалет в поезде</em></td><td><em>Второй вагон, Третий вагон</em></td></tr><tr><td></td><td></td><td><em>Третий вагон</em></td><td><em>Нет</em></td></tr></tbody></table><p>Замечание к дизайну сеттинга <strong>Поезд</strong>:</p><ul><li>Обстановка в плане драматичности остаётся прежней и усиливается к завершению данного сеттинга.</li><li>Атмосфера – тихий шум движущегося поезда.</li></ul><h4 id="сеттинг-vii-конечная-станция" tabindex="-1"><a class="header-anchor" href="#сеттинг-vii-конечная-станция" aria-hidden="true">#</a> <em>Сеттинг VII. Конечная станция</em></h4><p>Рон, не зная, что делать, метается по платформе, пока его не хватает кто-то за руку. Рона начинает трясти, но это оказался коллега из отдела технической поддержки Ройстон Медовая-Бабочка. После встречи они оказываются в парке на скамейке возле станции, где Рону сообщают о деталях происходящего (см. Таблицу 7-9).</p><p><strong>Таблица 7-9.</strong> Сеттинг &quot;Конечная станция&quot; в повести &quot;Август возвращается&quot;</p><table><thead><tr><th>Сеттинг</th><th>Место</th><th>Комната</th><th>Связанные комнаты</th></tr></thead><tbody><tr><td><em><strong>Конечная станция</strong></em></td><td><em>Конечная станция</em></td><td><em>Платформа А</em></td><td><em>Платформа Б</em></td></tr><tr><td></td><td></td><td><em>Платформа Б</em></td><td><em>Платформа А, Дорога в парк</em></td></tr><tr><td></td><td></td><td><em>Дорога в парк</em></td><td><em>Скамейке в парке</em></td></tr><tr><td></td><td></td><td><em>Скамейке в парке</em></td><td></td></tr></tbody></table><p>Замечание к дизайну сеттинга <strong>Конечная станция</strong>:</p><ul><li>Не считая ситуации на платформе, сеттинг имеет расслабленный тон повествования. В этой сцене благодаря встречи с союзником главный герой чувствует себя в безопасности.</li><li>Звуковое сопровождение должно быть как в сеттинге «Город», но более тихим и не таким насыщенным.</li></ul><h4 id="сеттинг-viii-остров" tabindex="-1"><a class="header-anchor" href="#сеттинг-viii-остров" aria-hidden="true">#</a> <em>Сеттинг VIII. Остров</em></h4><p>Когда Ройстон покинул Рона, ему снова позвонили на телефон. Рейн сообщает ему, что нужно избавиться от телефона, и используя поезд, паром, рыбацкую лодку, прибыть в течении трёх дней на самый дальний остров на севере (см. Таблицу 7-10).</p><p>На самом острове Рона встречает погибший Мервин Попплуэлл, и скрывшись в бункере из четырех комнат, за чашкой чая Рону рассказывают, что нужно закончить работу над системой безопасности «Август».</p><p>Поскольку команда не может защититься, на помощь, используя вертолет, прилетает Ройстон Медовая-Бабочка.</p><p><strong>Таблица 7-10.</strong> Сеттинг &quot;Остров&quot; в повести &quot;Август возвращается&quot;</p><table><thead><tr><th>Сеттинг</th><th>Место</th><th>Комната</th><th>Связанные комнаты</th></tr></thead><tbody><tr><td><em><strong>Остров</strong></em></td><td><em>Остров</em></td><td><em>Берег</em></td><td><em>Путь к бункеру А</em></td></tr><tr><td></td><td></td><td><em>Путь к бункеру А</em></td><td><em>Путь к бункеру Б</em></td></tr><tr><td></td><td></td><td><em>Путь к бункеру Б</em></td><td><em>Вход в бункер</em></td></tr><tr><td></td><td></td><td><em>Вход в бункер</em></td><td><em>Первая комната в бункере</em></td></tr><tr><td></td><td><em>Бункер</em></td><td><em>Первая комната в бункере</em></td><td><em>Вторая комната в бункере, Третья комната в бункере, Четвертая комната в бункере</em></td></tr><tr><td></td><td></td><td><em>Вторая комната в бункере</em></td><td><em>Первая комната в бункере, Третья комната в бункере, Четвертая комната в бункере</em></td></tr><tr><td></td><td></td><td><em>Третья комната в бункере</em></td><td><em>Первая комната в бункере, Вторая комната в бункере, Четвертая комната в бункере</em></td></tr><tr><td></td><td></td><td><em>Четвертая комната в бункере</em></td><td><em>Первая комната в бункере, Вторая комната в бункере, Третья комната в бункере</em></td></tr></tbody></table><p>Замечание к дизайну сеттинга <strong>Остров</strong>:</p><ul><li>Остров — это место, где главный герой приходит в себя и собирается с силами, все это должен отобразиться в сценарий. После напряженного начала на этом этапе игры игрок чувствует себя непринужденно.</li><li>Так как события происходят на дальнем севере мы должны слышать звуки океана и сильного ветра.</li></ul><h4 id="сеттинг-ix-океан" tabindex="-1"><a class="header-anchor" href="#сеттинг-ix-океан" aria-hidden="true">#</a> <em>Сеттинг IX. Океан</em></h4><p>Спустя несколько дней к Рону прибывает Рейн и предлагает покинуть бункер, так как в резиденции президента произошло чрезвычайное происшествие. Рон принимает предложение. После чего они покидают остров, погрузившись на судно на воздушной подушке. Хоть это и короткая сцена, но из-за эпизода с нападением на корабль, очень напряженная (см. Таблицу 7-11).</p><p><strong>Таблица 7-11.</strong> Сеттинг &quot;Остров&quot; в повести &quot;Август возвращается&quot;</p><table><thead><tr><th>Сеттинг</th><th>Место</th><th>Комната</th><th>Связанные комнаты</th></tr></thead><tbody><tr><td><em><strong>Океан</strong></em></td><td><em>Судно</em></td><td><em>Палуба</em></td><td><em>Рубка</em></td></tr><tr><td></td><td></td><td><em>Рубка</em></td><td><em>Палуба</em></td></tr><tr><td></td><td><em>Спасательный вертолёт</em></td><td><em>Рубка</em></td><td><em>Палуба</em></td></tr><tr><td></td><td></td><td><em>Палуба</em></td><td><em>Рубка</em></td></tr></tbody></table><p>Замечание к дизайну сеттинга <strong>Океан</strong>:</p><ul><li>Тон написание должен вызывать чувство динамики и опасности.</li><li>Звук соответствует тону письма. Мы слышим двигатель судна, тяжелые шаги, металлическое эхо, грохот дверей, шум волн океана, и в итоге нарастающий звук вертолета.</li></ul><h4 id="сеттинг-x-север" tabindex="-1"><a class="header-anchor" href="#сеттинг-x-север" aria-hidden="true">#</a> <em>Сеттинг X. Север</em></h4><p>Рон и его друзья покинули остров и высадились на побережье материка, где их уже ждала машина, чтобы отвезти в аэропорт. Используя частный самолёт, они вылетают в столицу. Во время полёта они узнают про ужасные события в резиденции президента (см. Таблицу 7-12).</p><p><strong>Таблица 7-12.</strong> Сеттинг &quot;Север&quot; в повести &quot;Август возвращается&quot;</p><table><thead><tr><th>Сеттинг</th><th>Место</th><th>Комната</th><th>Связанные комнаты</th></tr></thead><tbody><tr><td><em><strong>Север</strong></em></td><td><em>Побережье</em></td><td><em>Побережье</em></td><td><em>Автомобиль в аэропорт</em></td></tr><tr><td></td><td><em>Аэропорт</em></td><td><em>Автомобиль в аэропорт</em></td><td><em>Зона аэропорта А</em></td></tr><tr><td></td><td></td><td><em>Зона аэропорта А</em></td><td><em>Зона аэропорта Б, Автомобиль в аэропорт</em></td></tr><tr><td></td><td></td><td><em>Зона аэропорта Б</em></td><td><em>Самолет в столицу</em></td></tr><tr><td></td><td></td><td><em>Самолет в столицу</em></td><td><em>Нет</em></td></tr></tbody></table><p>Замечания к дизайну сеттинга <strong>Север</strong>:</p><ul><li>Текст в этом сеттинге должен спокойно вести повествование, так как большую часть врагов погибло в предыдущем сеттинге. Однако, происшествие в резиденции может поставить крест на миссии.</li><li>Звуковой фон должен успокаивать игрока. Можно добавить звуки поездки с берега в аэропорт, звук двигателя самолёта.</li></ul><h4 id="сеттинг-xi-город" tabindex="-1"><a class="header-anchor" href="#сеттинг-xi-город" aria-hidden="true">#</a> <em>Сеттинг XI. Город</em></h4><p>Рон и его друзья, прибыв в столицу, немедленно направляются в резиденцию президента (см. Таблицу 7-13). Где Рон встречает Клер и человека в комбинезоне. Им сообщают, что премьер-министр похищен, и чтобы его освободить Рон должен передать исходный код системы безопасности «Августа».</p><p>Рон соглашается с выдвинутыми условиями, но ухитряется обмануть врагов, подсунув им исправную систему безопасности, а спецназ в свою очередь обезвреживает всех сотрудников «Фракции».</p><p>В конце концов Рон оказывается дома, а когда возвращается офис, узнает, что он получает должность, которую раньше занимал Ройстон. Конец!</p><p><strong>Таблица 7-13.</strong> Сеттинг &quot;Город&quot; в повести &quot;Август возвращается&quot;</p><table><thead><tr><th>Сеттинг</th><th>Место</th><th>Комната</th><th>Связанные комнаты</th></tr></thead><tbody><tr><td><em><strong>Город</strong></em></td><td><em>Аэропорт</em></td><td><em>Прибытие</em></td><td><em>Машине в резиденцию президента</em></td></tr><tr><td></td><td></td><td><em>Машине в резиденцию президента</em></td><td><em>Лестница</em></td></tr><tr><td></td><td><em>Резиденция президента</em></td><td><em>Лестница</em></td><td><em>Парадный вход</em></td></tr><tr><td></td><td></td><td><em>Парадный вход</em></td><td><em>Зал, Лестница</em></td></tr><tr><td></td><td></td><td><em>Зал</em></td><td><em>Парадный вход</em></td></tr><tr><td></td><td><em>Дом Рона</em></td><td><em>Приемная</em></td><td><em>Спальня</em></td></tr><tr><td></td><td></td><td><em>Спальня</em></td><td><em>Приемная, Балкон</em></td></tr><tr><td></td><td></td><td><em>Балкон</em></td><td><em>Спальня</em></td></tr></tbody></table><p>Замечание к дизайну сеттинга <strong>Город</strong>:</p><ul><li>Тон письма должен быть сухим, холодным. Он должен показать в действиях главного героя твёрдость и расчетливость. Рон за нескольких недель своих приключений пережил многое, стал мудрее.</li><li>Что касается звука, находясь в столице — это шум города, а попав в резиденцию президента – это тихая атмосфера. Так же мы должны выделить динамические сцены и сцены, в которых нужно принимать судьбоносные решения.</li></ul><h4 id="сеттинг-xii-новыи-офис" tabindex="-1"><a class="header-anchor" href="#сеттинг-xii-новыи-офис" aria-hidden="true">#</a> <em>Сеттинг XII. Новый офис</em></h4><p>Рон возвращается на работу. Офис отремонтирован за время его отсутствия, стоят новые рабочие столы и компьютеры (см. Таблицу 7-14).</p><p>Появляется Ройстон и говорит, что уходит на пенсию. Он предлагает Рону занять его место в отделе технической поддержки. Рон не задумываясь соглашается, понимая, что в будущем его ожидают новые приключения.</p><p><strong>Таблица 7-14.</strong> Сеттинг &quot;Новый офис&quot; в повести &quot;Август возвращается&quot;</p><table><thead><tr><th>Сеттинг</th><th>Место</th><th>Комната</th><th>Связанные комнаты</th></tr></thead><tbody><tr><td><em><strong>Новый офис</strong></em></td><td><em>Новое рабочее место Рона</em></td><td><em>Рабочий стол Рона</em></td><td><em>Зона с питьевым фонтанчиком, Рабочий стол Ройстона</em></td></tr><tr><td></td><td></td><td><em>Соседний рабочий стол</em></td><td><em>Новое рабочее место Рона</em></td></tr><tr><td></td><td><em>Помещение, где храниться сотовый телефон</em></td><td><em>Рабочий стол Ройстона (Новое рабочее место Рона)</em></td><td><em>Новое рабочее место Рона, Хранилище документов</em></td></tr><tr><td></td><td></td><td><em>Хранилище документов</em></td><td><em>Рабочий стол Ройстона</em></td></tr></tbody></table><p>Замечание к дизайну сеттинга <strong>Новый офис</strong>:</p><ul><li>Текст должен вызывать чувство триумфа и оптимизма.</li><li>В этом сеттинге мы должны слышать спокойную рабочую обстановку в офисе.</li></ul><h2 id="часть-i-начало-август-возвращается-в-ren-py" tabindex="-1"><a class="header-anchor" href="#часть-i-начало-август-возвращается-в-ren-py" aria-hidden="true">#</a> Часть I: Начало &quot;Август возвращается&quot; в Ren’Py</h2><p>Теперь пришло время приступить к написанию кода. &quot;Август возвращается&quot; имеет 61 комнату, приблизительно от 2000 до 2500 слов, и этого достаточно чтобы познакомится с процессом разработки игр в Ren’Py.</p><h3 id="создание-проекта" tabindex="-1"><a class="header-anchor" href="#создание-проекта" aria-hidden="true">#</a> Создание проекта</h3><p>На Лаунчере Ren’Py нажмите <em>&quot;Добавить новый проект&quot;</em>. У вас запросят указать имя проекта на латинице, в нашем случае — это <em>&quot;Avgust Vozvrashaetsya&quot;</em>. Затем выбираем разрешение для проекта, по умолчанию это 1920x1080 (Full HD) и нажимаем <em>&quot;Продолжить&quot;</em>. На следующем шаге задаём <em>цветовую схему</em> игры. Если возникнет потребность данные параметры можно будет изменить. После нажатия <em>&quot;Продолжить&quot;</em>, Ren’Py выполнить процесс создания проекта и вернёт вас на главный экран лаунчера.</p><p>В левой части в разделе <em>&quot;Проекты&quot;</em>, выберите &quot;Avgust Vozvrashaetsya&quot;. Далее в разделе <em>&quot;Редактировать файл&quot;</em> нажмите на файле <em>script.rpy</em>. Он откроется в текстовом редакторе. Это основной скрипт игры. На протяжении данной главы мы в основном будем работать только с ним.</p><p>Нужно отметить, что скрипты Ren’Py очень чувствительны к пробелам и синтаксису. Например, некоторые текстовые редакторы выполняют авто форматирование и заменяют <em>обычные кавычки</em> на <em>изогнутые</em>. Это приводит к тому, что Ren’Py не может выполнить скрипт. Желательно отключите авто форматирование в вашем текстовом редакторе или используйте IDE (интегрированную среду разработки).</p><h3 id="настроика-персонажеи" tabindex="-1"><a class="header-anchor" href="#настроика-персонажеи" aria-hidden="true">#</a> Настройка персонажей</h3><p>По умолчанию в файле сценария присутствует персонаж Эйлин. Мы его заменим на свой список персонажей указав имя и цвет диалога.</p><p>Для цвета в Ren’Py используется шестнадцатеричный формат, как и в HTML. В котором первые две цифры это красный цвет, следующие две – зелёный, а последние две – синий. Диапазон значений состоит от 0 до 9, потом от A до F. Например, красный цвет имеет значение: <em>#FF0000</em>, а черный: <em>#000000</em>.</p><p>Откройте файл script.rpy и найдите следующую строку:</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>define e <span class="token operator">=</span> Character<span class="token punctuation">(</span><span class="token string">&#39;Эйлин&#39;</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">&quot;#c8ffc8&quot;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>И вместо неё вставьте следующий код:</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>define reg <span class="token operator">=</span> Character<span class="token punctuation">(</span><span class="token string">&quot;Рон Легион-Смерти&quot;</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">&quot;#0099BB&quot;</span><span class="token punctuation">)</span>
define merv <span class="token operator">=</span> Character<span class="token punctuation">(</span><span class="token string">&quot;Мервин Попплуэлл&quot;</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">&quot;#007799&quot;</span><span class="token punctuation">)</span>
define roy <span class="token operator">=</span> Character<span class="token punctuation">(</span><span class="token string">&quot;Ройстон Медовая-Бабочка&quot;</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">&quot;#0044CC&quot;</span><span class="token punctuation">)</span>
define rai <span class="token operator">=</span> Character<span class="token punctuation">(</span><span class="token string">&quot;Рейн&quot;</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">&quot;#8888EE&quot;</span><span class="token punctuation">)</span>
define cla <span class="token operator">=</span> Character<span class="token punctuation">(</span><span class="token string">&quot;Клэр&quot;</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">&quot;#AA1100&quot;</span><span class="token punctuation">)</span>
define man <span class="token operator">=</span> Character<span class="token punctuation">(</span><span class="token string">&quot;Человек в комбинезоне&quot;</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">&quot;#EE1100&quot;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Как видим для каждого персонажа задаётся имя и цвет диалога, а сам персонаж в свою очередь присваивается константе виде сокращенного имени. Для различия главному герою и его команде задаются цвета синих оттенков, а стороне антагониста оттенки красного цвета.</p><h3 id="переходы" tabindex="-1"><a class="header-anchor" href="#переходы" aria-hidden="true">#</a> Переходы</h3><p>Ранее в этой книге мы уже познакомились со стандартными переходами в Ren’Py (например, <em>затухание</em>, <em>растворение</em>, <em>пикселизация</em>), но иногда нужно создать переходы с индивидуальными параметрами. Добавим два таких перехода в скрипт игры. Первый это <em>&quot;slideleft&quot;</em> - слайдер в лево, который выполняет переход в течении двух секунд. Второй <em>&quot;fireflash&quot;</em> - вспышка, который представляет собой переход к ярко-оранжевому цвету и обратно. Он будет использоваться для сцен пожара.</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>define slideleft <span class="token operator">=</span> CropMove<span class="token punctuation">(</span><span class="token number">2.0</span><span class="token punctuation">,</span> <span class="token string">&quot;slideleft&quot;</span><span class="token punctuation">)</span>
define fireflash <span class="token operator">=</span> Fade<span class="token punctuation">(</span><span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">&quot;#e40&quot;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="изображения-для-персонажеи" tabindex="-1"><a class="header-anchor" href="#изображения-для-персонажеи" aria-hidden="true">#</a> Изображения для персонажей</h3><p>На лаунчере Ren’Py в раздел <em>&quot;Открыть папку&quot;</em> есть ссылка <em>images</em>. После её нажатия откроется каталог с изображениями проекта.</p><p>Чтобы назначить изображение персонажу, нужно выполнить следующие правило: имя файла с изображением должно совпадать с именем константы, в которой храниться персонаж. Например, в нашем случае нужно добавить изображения с именами <em>reg.png</em>, <em>merv.png</em>, <em>roy.png</em> и так далее. Так же файл с именем <em>Reg.png</em> соответствует <em>reg.png</em> и будет присвоен персонажу, но файл с именем <em>Reginald.png</em> уже не подойдёт.</p><p>Нужно не забывать, что Ren’Py для персонажей использует формат изображения PNG и WEBP, а для фона JPG, PNG и WEBP.</p><h3 id="подготовка-ассетов" tabindex="-1"><a class="header-anchor" href="#подготовка-ассетов" aria-hidden="true">#</a> Подготовка ассетов</h3><p>Хоть Ren’Py на основе имени автоматически подгружает изображения персонажей, то остальные аудиовизуальные ресурсы нужно явно определить в файле скрипта. Как мы увидим позже большая часть ресурсов в создаваемой игре это фоновые изображения в формате jpg, которым присвоены соответствующие имена.</p><p>Единственным исключением является персонаж Рейн. В определённый момент игры её лицо становится серьёзным. Для этого мы дополнительно загружаем изображение выполнив следующую команду:</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>image rai serious <span class="token operator">=</span> <span class="token string">&quot;rai_serious.png&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Теперь для вывода персонажа Рейн с серьезным выражением лица нужно выполнить команду <em>rai serious &quot;Да, я серьезно!&quot;</em>. На основе данного приёма сделайте своих персонажей более живыми используя как можно больше изображений с различными эмоциями лица.</p><p>Помните, вы можете использовать оператор image для определения как основного портрета персонажа (например, _image jimmy = &quot;jimmy.png&quot;), так и для дополнительных (например, <em>image jimmy happy = &quot;jimmyhappy.png&quot;</em>). Однако перед этим вам нужно определить персонажа (например, <em>define jimmy = Character(&quot;Jimmy&quot;)</em>), что мы и сделали в главе <em>&quot;Настройка персонажей&quot;</em>.</p><p>Теперь давайте определим ассеты для офиса, которые можно скрывать и показывать при помощи команд <em>hide</em> и <em>show</em> (например, чтобы показать изображение офиса <em>office1</em>.jpg, нужно выполнить команду: <em>show office</em>, а чтобы скрыть выполнить команду: <em>hide office</em>)</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>image office <span class="token operator">=</span> <span class="token string">&quot;office1.jpg&quot;</span>
image office2 <span class="token operator">=</span> <span class="token string">&quot;office2.jpg&quot;</span>
image email <span class="token operator">=</span> <span class="token string">&quot;email.jpg&quot;</span>
image topfloor <span class="token operator">=</span> <span class="token string">&quot;topfloor.jpg&quot;</span>
image cooler <span class="token operator">=</span> <span class="token string">&quot;cooler.jpg&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Далее назначим изображения для сцен города, парка, станции и т.д.:</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>image london <span class="token operator">=</span> <span class="token string">&quot;london.jpg&quot;</span>
image london2 <span class="token operator">=</span> <span class="token string">&quot;london2.jpg&quot;</span>
image park <span class="token operator">=</span> <span class="token string">&quot;park1.jpg&quot;</span>
image park2 <span class="token operator">=</span> <span class="token string">&quot;park2.jpg&quot;</span>

image alley <span class="token operator">=</span> <span class="token string">&quot;alley.jpg&quot;</span>
image door <span class="token operator">=</span> <span class="token string">&quot;door.jpg&quot;</span>
image window <span class="token operator">=</span> <span class="token string">&quot;window.jpg&quot;</span>

image station <span class="token operator">=</span> <span class="token string">&quot;station.jpg&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>В конце, определим четыре изображения для огня, которые будут отображаться в случайном порядке, чтобы показать хаос пожара.</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>image fire1 <span class="token operator">=</span> <span class="token string">&quot;fire1.jpg&quot;</span>
image fire2 <span class="token operator">=</span> <span class="token string">&quot;fire2.jpg&quot;</span>
image fire3 <span class="token operator">=</span> <span class="token string">&quot;fire3.jpg&quot;</span>
image fire4 <span class="token operator">=</span> <span class="token string">&quot;fire4.jpg&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="в-бои" tabindex="-1"><a class="header-anchor" href="#в-бои" aria-hidden="true">#</a> В бой!</h3><p>Теперь мы приступим к написанию основного сценария. Укажем кто мы и чем занимаемся. Для этого отобразим портрет главного героя в точке с координатами xpos: 0.7 и ypos: 0.2, где значение 0.0 – это левый край, а 1.0 правый. Так же применим ранее определённый эффект скольжения.</p><p>Но сначала зададим следующие переменные, которыми воспользуемся позже.</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># Начало игры</span>

label start<span class="token punctuation">:</span>

<span class="token comment"># Определяем переменные</span>

    $ sips <span class="token operator">=</span> <span class="token number">0</span>
    $ time <span class="token operator">=</span> <span class="token number">0</span>
    $ items <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    $ dvd_found <span class="token operator">=</span> <span class="token boolean">False</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>При написании скрипта, не забывайте корректно задавать отступы для блоков кода.</p><p>Далее вставляем пустую строку и прописываем щелчки мыши:</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>    play sound <span class="token punctuation">[</span> <span class="token string">&quot;&lt;silence 1.5&gt;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;sounds/mouse_clicks.wav&quot;</span> <span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Данная строка найдет в каталоге со звуками файл &quot;sounds/mouse_clicks.wav&quot; и воспроизведёт его с паузой в 1,5 секунды.</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>    show office1
    <span class="token keyword">with</span> slideleft
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>Теперь отобразим фон офиса с именем <em>office1</em> используя ранее определённый переход <em>slideleft</em>. Эти две строки должны иметь одинаковый отступ иначе при запуске игры возникнет ошибка. Чтобы с отступами было меньше проблем, то лучше использовать более продвинутые текстовый редактор, которые позволяет делать отступы при помощи кнопки Tab.</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>    show reg<span class="token punctuation">:</span>
        xalign <span class="token number">0.0</span>
        xpos <span class="token number">0.7</span>
        ypos <span class="token number">0.2</span>
    <span class="token keyword">with</span> easeinleft

    <span class="token string">&quot;Рон Легион-Смерти, правительственный эксперт по кибербезопасности, бездельничал за своим рабочим столом.&quot;</span>

    <span class="token string">&quot;Вместо работы над проектом, он смотрел смешные видеоролики в интернете.&quot;</span>

    <span class="token string">&quot;Рон находился в депрессии из-за смерти своего лучшего и единственного друга по офису Мервина Попплуэлла.&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>В результате после запуска игры будет отображено стартовое меню. После нажатия <em>&quot;Начать&quot;</em> начнётся повествование истории, появится изображение офиса и портрет главного героя. Если после нажатия <em>&quot;Запустить проект&quot;</em> и в игре не появились внесённые изменения, то вероятно не был сохранен файл сценария игры.</p><h3 id="комментирование-кода" tabindex="-1"><a class="header-anchor" href="#комментирование-кода" aria-hidden="true">#</a> Комментирование кода</h3><p>Хорошим тоном написания сценария – это его комментирование, особенно когда вы работаете в большой команде. В Ren’Py – это делается с помощью символа хэштега (#).</p><p>Например, добавьте данный комментарий перед появлением портрета главного героя с текстом &quot;Рон Легион-Смерти, правительственный…&quot;.</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># Комната 1: Рабочий стол Рона</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Хоть Ren’Py имеет строгие правила к отступам, но они не распространяется на комментарии, которые не являются частью кода.</p><h3 id="ваше-первое-меню" tabindex="-1"><a class="header-anchor" href="#ваше-первое-меню" aria-hidden="true">#</a> Ваше первое меню</h3><p>Теперь мы при помощи меню реализуем взаимодействие пользователя с игрой.</p><p>Однако сперва для работы меню нужно определить переменные после метки &quot;start&quot;. Чтобы это сделать используйте следующий синтаксис: <em>$ variable_name = 0</em>, где <em>variable_name</em> – имя переменной.</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>label start<span class="token punctuation">:</span>
    $ sips <span class="token operator">=</span> <span class="token number">0</span>
    $ time <span class="token operator">=</span> <span class="token number">0</span>
    $ items <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Как видим, инициализируется три переменных: <em>sips</em> – которая используется для подсчета количества сделанных глотков воды главным героем, переменная <em>time</em> будет подсчитывать количество проведённого времени, а переменная <em>items</em>, которая является пустым массивом, будет хранить в себе инвентарь. Однако Ren’Py не имеет массивов как таковых, вместо этого он использует <em>списки</em>.</p><p>Добавим следующий код в конец основного скрипта:</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>    menu deskaction<span class="token punctuation">:</span>
     <span class="token string">&quot;Выбери действие&quot;</span>
     <span class="token string">&quot;Посетить зону с питьевым фонтанчиком&quot;</span><span class="token punctuation">:</span>
         $ time <span class="token operator">+=</span> <span class="token number">1</span>
         stop sound fadeout <span class="token number">1.0</span>
         hide office1
         show cooler
         <span class="token keyword">with</span> dissolve
         jump drinkingfountain
         
     <span class="token string">&quot;Осмотреть рабочий стол коллеги&quot;</span><span class="token punctuation">:</span>
         $ time <span class="token operator">+=</span> <span class="token number">1</span>
         stop sound fadeout <span class="token number">1.0</span>
         hide office1
         show office2
         <span class="token keyword">with</span> dissolve
         jump neighboringdesk

    menu drinkingfountain<span class="token punctuation">:</span>
             <span class="token string">&quot;Выбери действие&quot;</span>
             <span class="token string">&quot;Вернуться к своему рабочему столу&quot;</span><span class="token punctuation">:</span>
                 jump deskaction
                 
             <span class="token string">&quot;Выпить&quot;</span><span class="token punctuation">:</span>
                 $ sips <span class="token operator">+=</span> <span class="token number">1</span>
                 
                 <span class="token string">&quot;Сделано глотков [sips].&quot;</span>
                 jump deskaction

    label neighboringdesk<span class="token punctuation">:</span>
           <span class="token keyword">if</span> time<span class="token operator">&gt;</span><span class="token number">3</span><span class="token punctuation">:</span>
               jump emailreceived

           <span class="token keyword">if</span> time<span class="token operator">&lt;=</span><span class="token number">2</span><span class="token punctuation">:</span>
               <span class="token string">&quot;Коллег ушел рано. Его рабочий стол пуст.&quot;</span>
               hide office2
               show office1
               <span class="token keyword">with</span> dissolve
               show reg
               jump deskaction
           <span class="token keyword">else</span><span class="token punctuation">:</span>
               <span class="token string">&quot;Соседний рабочий стол убран.&quot;</span>
               hide office2
               show office1
               <span class="token keyword">with</span> dissolve
               show reg
               jump deskaction
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>В данном коде для создания меню используются такие ключевые слова как <em>menu</em>, <em>jump</em> и <em>label</em>. Каждое меню должно иметь метку, в нашем случае это <em>deskaction</em>. А сочетание слов jump (прыжок) и label (метка) позволит выполнит переход по самому меню, и переход в нужную точку сценария. Так же обратите внимание, как используется знак двоеточия в конце меток и пунктов меню.</p><p>При выборе пункта меню «Выпить», над переменной выполняется операция +=, а потом она выводится в строке через квадратные скобки. Таким образом мы подсчитываем сколько Рон сделал глотков воды пока находился возле фонтанчика с водой. Каждое такое действие увеличивает количество глотков на единицу, но если нужно сделать 60 глотков, то строка имела бы вид <em>$ sips += 60</em>.</p><h3 id="использование-условного-оператора" tabindex="-1"><a class="header-anchor" href="#использование-условного-оператора" aria-hidden="true">#</a> Использование условного оператора</h3><p>Благодаря условному оператору <em>if</em>, <em>elif</em> и <em>else</em> игру можно сделать более разнообразной и интересной. Для этого замените код от строки <em>menu drinkingfountain:</em> до <em>jump deskaction</em> на следующий:</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>    menu drinkingfountain<span class="token punctuation">:</span>
             <span class="token string">&quot;Выбери действие&quot;</span>

             <span class="token string">&quot;Вернуться к своему рабочему столу&quot;</span><span class="token punctuation">:</span>
                 jump deskaction

             <span class="token string">&quot;Выпить&quot;</span><span class="token punctuation">:</span>
                 $ sips <span class="token operator">+=</span> <span class="token number">1</span>
                 play sound <span class="token string">&quot;sounds/gulp.wav&quot;</span>

                 <span class="token keyword">if</span> sips<span class="token operator">&lt;</span><span class="token number">3</span><span class="token punctuation">:</span>
                     <span class="token string">&quot;Сделано глотков [sips].&quot;</span>
                     show office1
                     <span class="token keyword">with</span> dissolve
                     jump deskaction
                 <span class="token keyword">elif</span> sips<span class="token operator">==</span><span class="token number">3</span><span class="token punctuation">:</span>
                     <span class="token string">&quot;После [sips] глотков, вы утолили жажду.&quot;</span>
                     show office1
                     <span class="token keyword">with</span> dissolve
                     jump deskaction
                 <span class="token keyword">else</span><span class="token punctuation">:</span>
                     <span class="token string">&quot;Пропало желание пить.&quot;</span>
                     show office1
                     <span class="token keyword">with</span> dissolve
                     jump deskaction
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Как видим благодаря условному оператору мы проверяем переменную <em>sips</em> и в зависимости от количества глотков сообщаем, что Рон утолил жажду. Условный оператор состоит из самого условия, которое прописывается после слова <em>if</em>, ключевого слова <em>elif</em> (если ещё), который используется для проверки дополнительных условий, и слова <em>else</em>, код после которого будет выполняться если ни одно из условий не выполнено.</p><p>Теперь давайте добавим еще условие, на основе переменной <em>time</em>. Для этого внесём изменения в код меню <em>deskaction</em>:</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>     <span class="token string">&quot;Посетить зону с питьевым фонтанчиком&quot;</span><span class="token punctuation">:</span>
         $ time <span class="token operator">+=</span> <span class="token number">1</span>
         jump drinkingfountain
         
     <span class="token string">&quot;Осмотреть рабочий стол коллеги&quot;</span><span class="token punctuation">:</span>
         $ time <span class="token operator">+=</span> <span class="token number">1</span>
         jump neighboringdesk
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Далее добавим условный оператор после строки <em>label neighboringdesk</em>:</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>           <span class="token keyword">if</span> time<span class="token operator">&gt;</span><span class="token number">3</span><span class="token punctuation">:</span>
               jump emailreceived
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>Этот код просто проверяет количество выполненных действий в игре, и когда число больше трёх, мы переходим к метке <em>emailreceived</em>.</p><p>Теперь сменим декорации. Добавьте следующие строки кода после <em>jump deskaction</em>:</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>    <span class="token comment"># Время электронной почты</span>
    label emailreceived<span class="token punctuation">:</span>
        scene email
        <span class="token keyword">with</span> dissolve
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>При помощи команды scene очищаем сцену от всех отображаемых объектов (т. е. фон и спрайты персонажей), и взамен показываем новый фон. После чего уведомляем игрока звуком колокольчика о получении электронного письма.</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>        play sound <span class="token string">&quot;sounds/email.wav&quot;</span>

        <span class="token string">&quot;Рон вернулся к своему рабочему столу, и замечает, что ему пришло письмо.&quot;</span>
        <span class="token string">&quot;Оно содержало следующее сообщение: \&quot;Встретимся сегодня в семь вечера в Парке возле Aрки. Никому не говори об этой встречи …\&quot;&quot;</span>
        <span class="token string">&quot;... и подписано Мервин Попплуэлл.&quot;</span>
        <span class="token string">&quot;Это какая-то шутка. Мервина же больше нет.&quot;</span>
        <span class="token string">&quot;Рон решает позвонить Ройстону сотруднику из технической поддержки, чтобы узнать, кто прислал это письмо.&quot;</span>
        <span class="token string">&quot;После телефонного звонка, выясняется, что письмо настоящее, и Ройстон просит Рона подняться на верхний этаж.&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Согласно повествованию, следующее место действия – это верхний этаж. В этой сцене так же используется условный оператор. Будет выполнена проверка переменной sips, чтобы узнать, немного ли выпил игрок воды, и если да, то отобразить шутливое сообщения.</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>label topfloor<span class="token punctuation">:</span>

    scene topfloor
    <span class="token keyword">with</span> dissolve

    <span class="token comment"># Показываем изображение телефона</span>
    show phone<span class="token punctuation">:</span>
        xalign <span class="token number">0.0</span>
        xpos <span class="token number">0.5</span>
        ypos <span class="token number">0.18</span>
    <span class="token keyword">with</span> easeinleft
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Кроме изображений фона и персонажей Ren’Py может отобразить любой другой спрайт. Если посмотреть пример предыдущего кода, то сценарий выводит спрайт мобильного телефона используя эффект <em>easeinleft</em>. Далее отображается диалог, а затем телефон исчезает с эффектом <em>easeoutright</em>.</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>    <span class="token string">&quot;Там Рон находите мобильный телефон 80-х годов, и забирает его с собой.&quot;</span>

    hide phone
    <span class="token keyword">with</span> easeoutright
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Теперь реализуем инвентарь. Используя метод <em>append</em>, добавим первый элемент инвентаря - мобильный телефон, и подадим специальный сигнал игроку.</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>    play sound <span class="token string">&quot;sounds/sound.wav&quot;</span>
    $ items<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">&quot;специальный телефон&quot;</span><span class="token punctuation">)</span>

    scene london
    <span class="token keyword">with</span> dissolve

   <span class="token comment"># Если игрок выпил слишком много воды, показываем сообщение</span>
    <span class="token keyword">if</span> sips <span class="token operator">&gt;=</span> <span class="token number">3</span><span class="token punctuation">:</span> 
        <span class="token string">&quot;Нужно сходить в туалет.&quot;</span>
    <span class="token string">&quot;Он всё же решается на встречу, предложенную в электронном письме.&quot;</span>

   <span class="token comment"># Парк</span>
    label hydepark<span class="token punctuation">:</span>
    play music <span class="token punctuation">[</span> <span class="token string">&quot;sounds/park.mp3&quot;</span> <span class="token punctuation">]</span> fadein <span class="token number">10.0</span> loop
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Возможно, вы помните Ren’Py по умолчанию имеет три звуковых канала: <em>sound</em>, <em>music</em>, и <em>voice</em>. Как видим, предыдущие строки кода демонстрируют нам использование музыкального канала. Мы циклично (<em>loop</em>) воспроизводим с нарастанием (<em>fadein</em>) в 10.0 секунд фоновые звуки парка.</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>    scene park
    <span class="token keyword">with</span> dissolve

    <span class="token string">&quot;Парк находился всего в нескольких минутах ходьбы от офиса. Идя по дороге к арке парка&quot;</span>
    $ items<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">&quot;монета&quot;</span><span class="token punctuation">)</span>  

    <span class="token comment"># Сортируем список элементов</span>
    $ items<span class="token punctuation">.</span>sort<span class="token punctuation">(</span><span class="token punctuation">)</span>

    play sound <span class="token string">&quot;sounds/sound.wav&quot;</span>
    <span class="token string">&quot;Рон замечаете монету в земле. Он поднял ее и положил в карман.&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Для сохранения инвентаря мы использовали пустую переменную <em>items</em> и походу игры используя метод <em>.append</em> добавили виде строки два предмета <em>монету</em> и <em>специальный телефон</em>. Как использовать данный список мы узнаем позже, но самый простой пример — это проверять наличие ключа у игрока для открытия двери.</p><p>Чтобы упорядочить инвентарь в списке отсортируем его в алфавитном порядке при помощи метода <em>sort</em>.</p><h3 id="настроика-скорости-текста" tabindex="-1"><a class="header-anchor" href="#настроика-скорости-текста" aria-hidden="true">#</a> Настройка скорости текста</h3><p>По умолчанию Ren’Py показывает диалог персонажа одним блоком. Если вы хотите использовать классический эффект печатной машинки, нужно открыть файл options.rpy и найти строку <em>default preferences.text_cps = 0</em>. Далее, ноль заменить на 20, после чего сохранить файл и перезапустить игру.</p><h3 id="обновляем-систему-инвентаря" tabindex="-1"><a class="header-anchor" href="#обновляем-систему-инвентаря" aria-hidden="true">#</a> Обновляем систему инвентаря</h3><p>Чтобы игрок не записывал найденные вещи на бумаге, реализуем интерфейс для отображения инвентаря. Добавим следующий код в скрипт, где оператор <em>init</em> позволит его выполнить в первую очередь.</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>init python<span class="token punctuation">:</span>
    items <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">def</span> <span class="token function">display_items_overlay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>items<span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">:</span>
            inventory <span class="token operator">=</span> <span class="token string">&quot;Инвентарь: &quot;</span>
            <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>items<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                item_name <span class="token operator">=</span> items<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token keyword">if</span> i <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">:</span>
                     inventory <span class="token operator">+=</span> <span class="token string">&quot;, &quot;</span>
                inventory <span class="token operator">+=</span> item_name
            ui<span class="token punctuation">.</span>frame<span class="token punctuation">(</span><span class="token punctuation">)</span>
            ui<span class="token punctuation">.</span>text<span class="token punctuation">(</span>inventory<span class="token punctuation">)</span>
    config<span class="token punctuation">.</span>overlay_functions<span class="token punctuation">.</span>append<span class="token punctuation">(</span>display_items_overlay<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>В результате код выведет список предметов инвентаря в верхнем левом углу экрана.</p><p>В коде при помощи оператора <em>python</em> указывается, что далее идут строки, которые нужно интерпретировать как чистый Python. То есть язык, на котором написан сам Ren’Py. После чего определяем список с названием <em>items</em>. Далее проверяем если <em>items</em> содержит хоть один элемент, то выводим содержимое через запятую. Данный процесс будет выполниться в фоновом режиме на протяжении всей игры.</p><p>На будущее, для манипуляции с элементами в списке существуют различные методы, с которыми вы можете ознакомиться в Таблице 7-15.</p><p><strong>Таблица 7-15.</strong> Методы для манипуляции со списками в Python и Ren’Py</p><table><thead><tr><th>Метод</th><th>Описание</th><th>Пример</th></tr></thead><tbody><tr><td><em>append</em></td><td>Добавить элемент в список</td><td>fruit.append(&quot;apple&quot;)</td></tr><tr><td><em>remove</em></td><td>Удалить элемент из списка</td><td>pocket.remove(&quot;pie&quot;)</td></tr><tr><td><em>insert</em></td><td>Вставляет элемент в заданную позицию</td><td>inventory.insert(2, &quot;deodorant&quot;)</td></tr><tr><td><em>reverse</em></td><td>В списке выставляет элементы в обратном порядке</td><td>names.reverse()</td></tr><tr><td><em>count</em></td><td>Подсчитывает количество элементов, найденных в списке</td><td>fruit.count(&quot;Pear&quot;)</td></tr><tr><td><em>sort</em></td><td>Сортирует элементы в алфавитном порядке</td><td>last_names.sort()</td></tr><tr><td><em>clear</em></td><td>Удаляет все элементы из списка</td><td>inventory.clear()</td></tr><tr><td><em>len</em></td><td>Возвращает количество элементов в списке</td><td>if len(items)&gt;0:<br> &quot;Hooray!&quot;</td></tr></tbody></table><p>Продолжим создавать игру добавив следующий код после строки <em>$ items.append(&quot;coin&quot;)</em>:</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>    scene park2
    <span class="token keyword">with</span> dissolve

    <span class="token string">&quot;Возле Арки парка никого не было.&quot;</span>
    <span class="token string">&quot;Рон довольно долго ждал, но никто так и не пришел.&quot;</span>
    <span class="token string">&quot;Разочаровавшись, он отправился домой.&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Теперь продолжим сценарий драматической сценой - пожаром в офисе:</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>    <span class="token comment"># Офис Инферно</span>
    label inferno<span class="token punctuation">:</span>

    <span class="token string">&quot;На обратной дороге Рон замечает, что горит его офис.&quot;</span>
    reg <span class="token string">&quot;Если бы я задержался немного на работе перед тем, как пойти в парк, то может быть предотвратил пожар.&quot;</span>
    play sound <span class="token string">&quot;sounds/phone.wav&quot;</span> loop

    <span class="token string">&quot;В этот момент из портфеля послышался звук звонящего телефон. Взволнованный Рон с трудом достаёт его и отвечает на звонок.&quot;</span>

    stop sound
    show roy<span class="token punctuation">:</span>
        xalign <span class="token number">0.0</span>
        xpos <span class="token number">0.2</span>
        ypos <span class="token number">0.2</span>
    <span class="token keyword">with</span> easeinright

    roy <span class="token string">&quot;Спаси розовый DVD-диск. У тебя осталось около десяти минут, прежде чем его поглотит огонь.&quot;</span>

    hide roy
    play sound <span class="token string">&quot;sounds/siren.wav&quot;</span> fadein <span class="token number">5.0</span> fadeout <span class="token number">5.0</span>

    <span class="token string">&quot;Речь шла про систему безопасности «Август», которую должны интегрировать во все государственные службы страны. &quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="добавляем-функции" tabindex="-1"><a class="header-anchor" href="#добавляем-функции" aria-hidden="true">#</a> Добавляем функции</h3><p>Функции — это многократно используемый код. Они так же приводят код в порядок и ускоряют процесс разработки. В Ren’Py функции вызываются при помощи команды <em>call</em>.</p><p>Перед тем как познакомится с функциями, добавим после строки <em>label start:</em> переменную <em>$ dvd_found = False</em>, чтобы запомнить есть ли у вас DVD-диск или нет. Это <em>логическая переменная</em> и может иметь только два значения: истина (True) или ложь (False).</p><blockquote><p>Примечание:</p><p>Ren’Py требователен к значениям переменных логического типа, которые должны начинаться с заглавной буквы (т. е. <em>True</em> — это правильно, а <em>true</em> вызовет ошибку).</p></blockquote><p>Теперь определим три функции перед меткой <em>label start:</em>.</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>label show_fire<span class="token punctuation">:</span>
    $ num <span class="token operator">=</span> renpy<span class="token punctuation">.</span>random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>
    $ which <span class="token operator">=</span> <span class="token string">&quot;fire&quot;</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span>
    show expression which
    <span class="token keyword">with</span> fireflash
    <span class="token keyword">return</span>

label check_dvd<span class="token punctuation">:</span>
    <span class="token comment"># воспроизвести звук если dvd_found не равно True</span>
    <span class="token keyword">if</span> dvd_found <span class="token operator">==</span> <span class="token boolean">False</span><span class="token punctuation">:</span>
      play sound <span class="token string">&quot;sounds/sound.wav&quot;</span>
    $ <span class="token keyword">if</span> dvd_found <span class="token operator">==</span> <span class="token boolean">False</span><span class="token punctuation">:</span> items<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">&quot;DVD-диск&quot;</span><span class="token punctuation">)</span>
    $ <span class="token keyword">if</span> dvd_found <span class="token operator">==</span> <span class="token boolean">False</span><span class="token punctuation">:</span> items<span class="token punctuation">.</span>sort<span class="token punctuation">(</span><span class="token punctuation">)</span>
    $ <span class="token keyword">if</span> dvd_found <span class="token operator">==</span> <span class="token boolean">False</span><span class="token punctuation">:</span> dvd_found <span class="token operator">=</span> <span class="token boolean">True</span>
    <span class="token keyword">return</span>

label checktime<span class="token punctuation">:</span>
    <span class="token comment"># вызываем функцию show_fire из этой функции</span>
    call show_fire

    play sound <span class="token string">&quot;sounds/woosh.wav&quot;</span>
    $ time <span class="token operator">-=</span> <span class="token number">5</span>
    <span class="token keyword">if</span> time <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">:</span>
      jump burn
    <span class="token keyword">return</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Первая функция <em>show_fire</em> используется для случайного выбора фона из четырех изображений. Для этого в переменную <em>num</em> помещается случайное число от одного до четырех. Затем это число преобразовывается в строку и добавляется к строке <em>fire</em>. После чего передаём ее команде show, преобразовав оператором <em>expression</em> в исполняемую строку. В результате с эффектом <em>fireflash</em> (определённый ранее) отобразиться фон с огнём.</p><p>Вторая функция <em>check_dvd</em> сперва проверяет, равно ли значение переменной dvd_found False. Если это так, то элемент добавляется в инвентарь с помощью метода append, а сам список сортируется в алфавитном порядке. В конце, переменной dvd_found присваивается значение True, для избежания повторного добавления DVD-диска в инвентарь.</p><p>Для третей функции <em>checktime</em> понадобиться ранее используемая переменная <em>time</em>, со значением 25. Не бойтесь, в программировании повторное использование переменных вполне нормальная практика.</p><p>В эпизоде, где игрок лихорадочно ищет DVD-диск в офисе охваченным огнём имеется четыре комнаты (т. е. <em>Помещение офиса - officefire</em>, <em>Рабочий стол Рона - firedesk_a</em>, <em>Соседний стол А - firedesk_b</em>, <em>Соседний стол Б - firedesk_c</em>). А искомый диск находиться на рабочем столе коллеги <em>firedesk_c</em>, но игрок об этом не знает. Вот здесь и будет использоваться функция <em>checktime</em>, которая при каждом переходе между столами будет сокращать переменную time на 5 секунд, а как только время достигнет нуля, то функция выполнить переход к сцене гибели игрока в огне.</p><p>Чтобы перейти к созданию данного эпизода нужно ещё добавить сцену с переулком, где указываем значение для переменной time:</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>    <span class="token comment"># В Аду</span>
    label actionscene<span class="token punctuation">:</span>

    scene alley
    <span class="token keyword">with</span> dissolve

    play music <span class="token punctuation">[</span> <span class="token string">&quot;sounds/fireplace.mp3&quot;</span> <span class="token punctuation">]</span> fadein <span class="token number">10.0</span> loop

    <span class="token string">&quot;Оказавшись возле офиса, Рон, недолго думая, взбирается по пожарной лестнице.&quot;</span>
    $ time <span class="token operator">=</span> <span class="token number">25</span>

    call show_fire
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="система-частиц-с-snowblossom" tabindex="-1"><a class="header-anchor" href="#система-частиц-с-snowblossom" aria-hidden="true">#</a> Система частиц с SnowBlossom</h3><p>Главный герой попадает в огненный ад, а огонь как мы знаем сопровождается искрами. Давайте добавим такой эффект используя <em>систему частиц</em>. Где сама частица — это маленькое изображение (спрайт), а используя большое количество таких частиц, можно создать эффекты как дождь, снег и взрыв. Для этого в Ren’Py существует встроенный объект SnowBlossom. Он часто используется в визуальных новеллах для реализации падение листвы с дерева или лепестков цветущей сакуры, но мы применим данный эффект для создания анимации искр огня.</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>    <span class="token comment"># Добавляем и настраиваем эффект летящих искр с помощью SnowBlossom</span>
    image sparks <span class="token operator">=</span> Fixed<span class="token punctuation">(</span>
        SnowBlossom<span class="token punctuation">(</span>im<span class="token punctuation">.</span>FactorScale<span class="token punctuation">(</span><span class="token string">&quot;images/fireparticle.png&quot;</span><span class="token punctuation">,</span><span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>count<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">,</span>start<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        SnowBlossom<span class="token punctuation">(</span>im<span class="token punctuation">.</span>FactorScale<span class="token punctuation">(</span>im<span class="token punctuation">.</span>Alpha<span class="token punctuation">(</span><span class="token string">&quot;images/fireparticle.png&quot;</span><span class="token punctuation">,</span><span class="token number">0.8</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">0.6</span><span class="token punctuation">)</span><span class="token punctuation">,</span>count<span class="token operator">=</span><span class="token number">15</span><span class="token punctuation">,</span>yspeed<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">125</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Основные параметры SnowBlossom это <em>count</em>, <em>start</em>, <em>yspeed</em> и <em>xspeed</em>. Параметр start задаёт в секундах задержку появления новых частиц. Сейчас данный параметр равен 5 секундам. Параметр count задаёт количество частиц.</p><p>Далее параметр yspeed задает скорость по вертикали, а xspeed задает скорость по горизонтали. Значение этих атрибутов, может быть, как отрицательные, так и положительные, и состоять из одного числа или кортежа (например <em>(5,10)</em> или <em>(-10,-5)</em>). При использовании в Ren’Py кортежей, то значение для параметра будет выбрано случайно из указанного диапазона чисел. В нашей игре искры должны падать довольно медленно, для этого зададим скорость от 50 до 125.</p><p>Так же видно, что в коде используется два экземпляра SnowBlossom. Первый создаёт полноразмерные частицы, а второй уменьшенный вариант этих частиц. Так же во втором варианте через параметр <em>im.Alpha</em>, который равен 0,6, указывается альфа-канал, делающий искры огня полупрозрачными. Благодаря этому достигается иллюзия глубины.</p><p>Так же можно использовать более упрощенный вариант эффекта SnowBlossom:</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>  image sparks <span class="token operator">=</span> Fixed<span class="token punctuation">(</span>
       SnowBlossom<span class="token punctuation">(</span>im<span class="token punctuation">.</span>FactorScale<span class="token punctuation">(</span><span class="token string">&quot;images/fireparticle.png&quot;</span><span class="token punctuation">,</span><span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> count<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">,</span> yspeed<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">110</span><span class="token punctuation">)</span><span class="token punctuation">,</span> xspeed<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> start<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>Но такой код создаст просто красивый эффект снега, но нам нужны более реалистичные искры, поэтому оставим предыдущий код.</p><p>Далее активизируем частицы при помощи команды show:</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>    show sparks

    menu officefire<span class="token punctuation">:</span>
     <span class="token string">&quot;Выбери действие. У вас осталось [time] секунд. Вы находитесь в помещении офиса.&quot;</span>
     <span class="token string">&quot;Подбежать к своему рабочему столу&quot;</span><span class="token punctuation">:</span>
         call checktime
         jump firedesk_a

     <span class="token string">&quot;Подбежать к столу коллеги&quot;</span><span class="token punctuation">:</span>
         call checktime
         jump firedesk_b

     <span class="token string">&quot;Подбежать к столу другого коллеги&quot;</span><span class="token punctuation">:</span>
         call checktime
         call check_dvd
         jump firedesk_c
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>После чего игрок видит меню из трёх пунктов. Сделав выбор, вызывается функция <em>checktime</em>, которая уменьшает оставшееся время на пять единиц. Если значение времени станет ниже пяти, то функция перенесет игрока к метке <em>burn</em> окончания игры. В этой части кода хорошо показано, как вынесенный повторяющийся код в функцию сокращает его размер.</p><p>Когда игрок попадает в комнату с DVD-диском (<em>firedesk_c</em>), то выполняется функция <em>check_dvd</em>, которая добавить диск к инвентарю, и отметит, что он найден.</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>    menu outwindow<span class="token punctuation">:</span>
     <span class="token string">&quot;Выбери действие. У вас осталось [time] секунд. Вы находитесь в помещении офиса.&quot;</span>
     <span class="token string">&quot;Вылезти через окно&quot;</span><span class="token punctuation">:</span>
         call checktime
         jump window

     <span class="token string">&quot;Подбежать к своему рабочему столу&quot;</span><span class="token punctuation">:</span>
         call checktime
         jump firedesk_a

     <span class="token string">&quot;Подбежать к столу коллеги&quot;</span><span class="token punctuation">:</span>
         call checktime
         jump firedesk_b

     <span class="token string">&quot;Подбежать к столу другого коллеги&quot;</span><span class="token punctuation">:</span>
         call checktime
         call check_dvd
         jump firedesk_c
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Для комнаты <em>&quot;Помещение офис&quot;</em> создаётся два почти идентичных меню. Первое это <em>officefire</em> переход, к которому выполняться при <em>dvd_found</em> равно False. Второе меню <em>outwindow</em> с дополнительным пунктом <em>&quot;Вылезти в окно&quot;</em>, выведется если переменная <em>dvd_found</em> будет равна True. Другими словами, возможность покинуть охваченный огнём офис через окно, появляется, когда игрок найдет DVD-диск посетив комнату <em>firedesk_c</em>, а потом вернется в комнату <em>&quot;Помещение офис&quot;</em>.</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>    menu firedesk_a<span class="token punctuation">:</span>
     <span class="token string">&quot;Выбери действие. У вас осталось [time] секунд. Вы находитесь возле своего рабочего стола, но здесь нет DVD-диска, только пламя.&quot;</span>

     <span class="token string">&quot;Вернуться в помещение офиса&quot;</span><span class="token punctuation">:</span>
         call checktime
         <span class="token keyword">if</span> dvd_found <span class="token operator">==</span> <span class="token boolean">False</span><span class="token punctuation">:</span>
              jump officefire
         <span class="token keyword">else</span><span class="token punctuation">:</span>
              jump outwindow

     <span class="token string">&quot;Подбежать к столу коллеги&quot;</span><span class="token punctuation">:</span>
         call checktime
         jump firedesk_b

     <span class="token string">&quot;Подбежать к столу другого коллеги&quot;</span><span class="token punctuation">:</span>
         call checktime
         call check_dvd
         jump firedesk_c

    menu firedesk_b<span class="token punctuation">:</span>
     <span class="token string">&quot;Выбери действие. У вас осталось [time] секунд. Вы находитесь возле стола своего коллеги, но здесь нет DVD-диска, только дым.&quot;</span>

     <span class="token string">&quot;Вернуться в помещение офиса&quot;</span><span class="token punctuation">:</span>
         call checktime
         <span class="token keyword">if</span> dvd_found <span class="token operator">==</span> <span class="token boolean">False</span><span class="token punctuation">:</span>
              jump officefire
         <span class="token keyword">else</span><span class="token punctuation">:</span>
              jump outwindow

     <span class="token string">&quot;Вернуться к своему рабочему столу&quot;</span><span class="token punctuation">:</span>
         call checktime
         jump firedesk_a

     <span class="token string">&quot;Подбежать к столу другого коллеги&quot;</span><span class="token punctuation">:</span>
         call checktime
         call check_dvd
         jump firedesk_c
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Так. Комнаты <em>firedesk_a</em> и <em>firedesk_b</em> добавлены, осталось добавить комнату с DVD-диском:</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>    menu firedesk_c<span class="token punctuation">:</span>
     <span class="token string">&quot;Выбери действие. У вас осталось [time] секунд. Вы находитесь возле стола другого коллеги.&quot;</span>

     <span class="token string">&quot;Вернуться в помещение офиса&quot;</span><span class="token punctuation">:</span>
         call checktime
         <span class="token keyword">if</span> dvd_found <span class="token operator">==</span> <span class="token boolean">False</span><span class="token punctuation">:</span>
              jump officefire
         <span class="token keyword">else</span><span class="token punctuation">:</span>
              jump outwindow

     <span class="token string">&quot;Подбежать к своему рабочему столу&quot;</span><span class="token punctuation">:</span>
         call checktime
         jump firedesk_a

     <span class="token string">&quot;Подбежать к столу коллеги&quot;</span><span class="token punctuation">:</span>
         call checktime
         jump firedesk_b
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>В случае если наш главный герой погибает, но он при этом успел найти диск, то мы, используя условный оператор, отобразим дополнительный диалог:</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>label burn<span class="token punctuation">:</span>
    <span class="token string">&quot;Задыхаясь от дыма, вы теряете сознание и сгораете заживо.&quot;</span>
    <span class="token keyword">if</span> dvd_found <span class="token operator">==</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
        <span class="token string">&quot;В результате после пожара спасатели обнаружили труп с DVD-диском в руках.&quot;</span>

    <span class="token comment"># Возвращаемся в главное меню</span>
    $ renpy<span class="token punctuation">.</span>full_restart<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>После этого используя метод <em>full_restart</em> сбрасываем игру, отобразив игроку главное меню. Игра окончена!</p><p>Теперь вставим код, когда главный герой успешно находит DVD-диск и спасается от огня:</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>label window<span class="token punctuation">:</span>
    <span class="token string">&quot;В конце концов вы находите спасение выбравшись из офиса через окно и спустившись по пожарной лестнице!&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="случаиныи-диалог" tabindex="-1"><a class="header-anchor" href="#случаиныи-диалог" aria-hidden="true">#</a> Случайный диалог</h3><p>Давайте добавим в историю случайные диалоги, чтобы разнообразить игру.</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>    $ randomdialogue <span class="token operator">=</span> renpy<span class="token punctuation">.</span>random<span class="token punctuation">.</span>choice<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#39;Телефон в портфеле снова зазвонил.&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Из портфеля раздался пронзительно громкий звук.&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Зазвонил старый мобильный телефон.&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

    play sound <span class="token string">&quot;sounds/phone.wav&quot;</span> loop

    <span class="token comment"># Отображаем случайный диалог</span>
    <span class="token string">&quot;[randomdialogue]&quot;</span>

    stop sound
    show roy<span class="token punctuation">:</span>
        xalign <span class="token number">0.0</span>
        xpos <span class="token number">0.2</span>
        ypos <span class="token number">0.2</span>
    <span class="token keyword">with</span> dissolve

    roy <span class="token string">&quot;Молодец. Теперь иди домой и жди дальнейших указаний. Если необходимо, защити диск ценой своей жизни.&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>В данной части кода используя переменную randomdialogue строка <em>&quot;[randomdialogue]&quot;</em> выводит одну из трех строк, хранящихся в переменной <em>random_narration</em>.</p><p>То есть если нам понадобиться получить и вывести случайное значение, нужно написать приблизительно следующие строки:</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>    <span class="token comment"># Генерируем случайное число от 20 до 80</span>
    $ random_number <span class="token operator">=</span> renpy<span class="token punctuation">.</span>random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">80</span><span class="token punctuation">)</span>

    <span class="token string">&quot;Вы в мотивированы на [random_number]%%, чтобы продолжить квест!&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Здесь мы инициализируем переменную <em>random_number</em>, и присваиваем ей значение от 1 до 100. Далее выводим её в диалоге игры. Однако нам нужно отобразить символ <em>%</em>, а это зарезервированный символ, для этого заменим его на запись <em>%%</em>, иначе Ren’Py выдаст ошибку.</p><p>А если потребуется сгенерировать случайное значение с плавающей запятой от 0 до 1 (например, <em>0,5</em> или <em>0,9</em>), то нужно воспользоваться методом <em>renpy.random.random()</em>.</p><h3 id="стили-и-гиперссылки" tabindex="-1"><a class="header-anchor" href="#стили-и-гиперссылки" aria-hidden="true">#</a> Стили и гиперссылки</h3><p>Сценарий этой маленькой игры заканчивается следующим образом:</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>label home<span class="token punctuation">:</span>

    scene london2
    <span class="token keyword">with</span> dissolve

    <span class="token comment"># Мы используем музыкальный канал для воспроизведения фона, так как он</span>
    <span class="token comment"># позволяет зациклит и применить затухание к аудио дорожке.</span>
    play music <span class="token punctuation">[</span> <span class="token string">&quot;sounds/london_bridge.wav&quot;</span> <span class="token punctuation">]</span> fadein <span class="token number">10.0</span> loop

    <span class="token string">&quot;Чем ближе Рон становился к дому, тем спокойней себя чувствовал.&quot;</span> 

    play sound <span class="token string">&quot;sounds/phone.wav&quot;</span> loop

    <span class="token string">&quot;Телефон снова зазвонил.&quot;</span>
    stop sound

    <span class="token string">&quot;Ответив, он услышал женский голос.&quot;</span>
   
    <span class="token comment"># Показываем Рейн с серьёзным лицом</span>
    show rai serious<span class="token punctuation">:</span>
        xalign <span class="token number">0.0</span>
        xpos <span class="token number">0.2</span>
        ypos <span class="token number">0.2</span>
    <span class="token keyword">with</span> dissolve
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Как видим, код выводит диалоги без форматирования. В конце, командой <em>show rai serious</em>, изменяем лицо Рейн на серьёзное, которое было определено ещё в начале сценария.</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>    rai <span class="token string">&quot;{i}Ни в коем случае, не возвращайтесь домой!{/i} Покинь город прямо {u}сейчас.{/u} Сядь на поезд, и уезжай на север.&quot;</span>
    rai <span class="token string">&quot;Главное не задерживайся! Чуть позже я тебе перезвоню. {b}И не потеряй диск!{/b}&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>Следующая часть кода сменяет лицо Рейн на дерзкое, оно является лицом по умолчанию. Напомним, что если команда show применяется без каких-либо параметров, то будет показано изображение персонажа по умолчанию (например, <em>rai.png</em>, <em>roy.png</em> и <em>reg.png</em>).</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>    <span class="token comment"># Меняем лицо Рейн с серьёзного на дерзкое</span>
    hide rai
    show rai<span class="token punctuation">:</span>
        xalign <span class="token number">0.0</span>
        xpos <span class="token number">0.2</span>
        ypos <span class="token number">0.2</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>В предыдущих диалогах мы применили к тексту три стиля: жирный, курсив и нижнее подчеркивание. Для этого строки оборачиваются в специальные теги состоящий из фигурных скобок с символом нужного стиля внутри (например, <em>{u}</em>). Но помните, используйте форматирование с умом, чтобы текст был легко читаем.</p><p>Теперь, давайте вставим немного рекламы в виде гиперссылки в диалоге.</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>    rai <span class="token string">&quot;О, когда будет свободное время, посетите {a=https://www.example.com}этот сайт{/a}.&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Как видим гиперссылки в Ren’Py встраиваются при помощи тега <em>a</em>, и после символа равно указывается ссылка на ресурс.</p><p>Если нужно изменить размер текста, то воспользуйтесь тегом <em>size</em>. Пример его использования, а также как можно комбинировать теги, показано в следующем коде.</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>    rai <span class="token string">&quot;Я каждый день на нём нахожу что-то новое. Он очень {size=+10}{i}увлекательный{/i}{/size}.&quot;</span>
    hide rai

    <span class="token comment"># Заменяем фоновый звук на другой </span>
    play music <span class="token punctuation">[</span> <span class="token string">&quot;sounds/ambience.wav&quot;</span> <span class="token punctuation">]</span> fadein <span class="token number">10.0</span> loop

    <span class="token comment"># Музыкальный канал отлично подходит и для создания атмосферного фона, </span>
    <span class="token comment"># и для воспроизведения аудио с определёнными параметрами.</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="добавляем-видео" tabindex="-1"><a class="header-anchor" href="#добавляем-видео" aria-hidden="true">#</a> Добавляем видео</h3></div><!--[--><!--]--></div><footer class="page-meta"><!----><!----><!----></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/book-game-development-renpy/chapter_6.html" class="" aria-label="Глава 6. Запускаем на популярных платформах"><!--[--><!--]--> Глава 6. Запускаем на популярных платформах <!--[--><!--]--></a></span><span class="next"><a href="/book-game-development-renpy/chapter_8.html" class="" aria-label="Глава 8. Рекламная стратегия"><!--[--><!--]--> Глава 8. Рекламная стратегия <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/book-game-development-renpy/assets/app-6c2260bc.js" defer></script>
  </body>
</html>
