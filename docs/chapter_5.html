<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.60">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <title>Глава 5. Погружаемся глубже | Game Development with Ren’Py</title><meta name="description" content="Разработка новелл при помощи Ren`Py, TyranoBuilder и Twine">
    <link rel="preload" href="/book-game-development-renpy/assets/style-5e12265d.css" as="style"><link rel="stylesheet" href="/book-game-development-renpy/assets/style-5e12265d.css">
    <link rel="modulepreload" href="/book-game-development-renpy/assets/app-160a7650.js"><link rel="modulepreload" href="/book-game-development-renpy/assets/framework-5866ffd3.js"><link rel="modulepreload" href="/book-game-development-renpy/assets/chapter_5.html-205ed1d1.js"><link rel="modulepreload" href="/book-game-development-renpy/assets/chapter_5.html-ff89e9f6.js"><link rel="prefetch" href="/book-game-development-renpy/assets/chapter_1.html-645da8b2.js" as="script"><link rel="prefetch" href="/book-game-development-renpy/assets/chapter_2.html-37ca180d.js" as="script"><link rel="prefetch" href="/book-game-development-renpy/assets/chapter_3.html-f9fb4639.js" as="script"><link rel="prefetch" href="/book-game-development-renpy/assets/chapter_4.html-2a8584c6.js" as="script"><link rel="prefetch" href="/book-game-development-renpy/assets/chapter_6.html-f27ffe71.js" as="script"><link rel="prefetch" href="/book-game-development-renpy/assets/chapter_7.html-6d5994f3.js" as="script"><link rel="prefetch" href="/book-game-development-renpy/assets/chapter_8.html-ae1045c5.js" as="script"><link rel="prefetch" href="/book-game-development-renpy/assets/index.html-5078772a.js" as="script"><link rel="prefetch" href="/book-game-development-renpy/assets/sources.html-05473ec3.js" as="script"><link rel="prefetch" href="/book-game-development-renpy/assets/404.html-60b35caa.js" as="script"><link rel="prefetch" href="/book-game-development-renpy/assets/chapter_1.html-e4dc558a.js" as="script"><link rel="prefetch" href="/book-game-development-renpy/assets/chapter_2.html-d53ec68c.js" as="script"><link rel="prefetch" href="/book-game-development-renpy/assets/chapter_3.html-639e9627.js" as="script"><link rel="prefetch" href="/book-game-development-renpy/assets/chapter_4.html-7ff325ef.js" as="script"><link rel="prefetch" href="/book-game-development-renpy/assets/chapter_6.html-fe5da56d.js" as="script"><link rel="prefetch" href="/book-game-development-renpy/assets/chapter_7.html-47612d5c.js" as="script"><link rel="prefetch" href="/book-game-development-renpy/assets/chapter_8.html-1c691f6e.js" as="script"><link rel="prefetch" href="/book-game-development-renpy/assets/index.html-cf996254.js" as="script"><link rel="prefetch" href="/book-game-development-renpy/assets/sources.html-0b3caa8f.js" as="script"><link rel="prefetch" href="/book-game-development-renpy/assets/404.html-87d54bd8.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/book-game-development-renpy/" class=""><!----><span class="site-name">Game Development with Ren’Py</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><!----><!--[--><!--]--><!----><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><!----><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><a href="/book-game-development-renpy/" class="sidebar-item sidebar-heading" aria-label="Разработка игр с помощью Ren’Py"><!--[--><!--]--> Разработка игр с помощью Ren’Py <!--[--><!--]--></a><!----></li><li><a href="/book-game-development-renpy/chapter_1.html" class="sidebar-item sidebar-heading" aria-label="Глава 1. Истории и как они создаются"><!--[--><!--]--> Глава 1. Истории и как они создаются <!--[--><!--]--></a><!----></li><li><a href="/book-game-development-renpy/chapter_2.html" class="sidebar-item sidebar-heading" aria-label="Глава 2. Древнее искусство интерактивной художественной литературы"><!--[--><!--]--> Глава 2. Древнее искусство интерактивной художественной литературы <!--[--><!--]--></a><!----></li><li><a href="/book-game-development-renpy/chapter_3.html" class="sidebar-item sidebar-heading" aria-label="Глава 3. Современные визуальные новеллы"><!--[--><!--]--> Глава 3. Современные визуальные новеллы <!--[--><!--]--></a><!----></li><li><a href="/book-game-development-renpy/chapter_4.html" class="sidebar-item sidebar-heading" aria-label="Глава 4. Знакомимся с Ren’Py, Twine и TyranoBuilder"><!--[--><!--]--> Глава 4. Знакомимся с Ren’Py, Twine и TyranoBuilder <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/book-game-development-renpy/chapter_5.html" class="router-link-active router-link-exact-active router-link-active sidebar-item sidebar-heading active" aria-label="Глава 5. Погружаемся глубже"><!--[--><!--]--> Глава 5. Погружаемся глубже <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/book-game-development-renpy/chapter_5.html#ren-py-контеинеры-и-кодеки" class="router-link-active router-link-exact-active sidebar-item" aria-label="Ren’Py, контейнеры и кодеки"><!--[--><!--]--> Ren’Py, контейнеры и кодеки <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/book-game-development-renpy/chapter_5.html#видео-в-ren-py" class="router-link-active router-link-exact-active sidebar-item" aria-label="Видео в Ren’Py"><!--[--><!--]--> Видео в Ren’Py <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/book-game-development-renpy/chapter_5.html#расширенные-функции-аудио-в-ren-py" class="router-link-active router-link-exact-active sidebar-item" aria-label="Расширенные функции аудио в Ren’Py"><!--[--><!--]--> Расширенные функции аудио в Ren’Py <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/book-game-development-renpy/chapter_5.html#подробнеи-о-графике" class="router-link-active router-link-exact-active sidebar-item" aria-label="Подробней о графике"><!--[--><!--]--> Подробней о графике <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/book-game-development-renpy/chapter_5.html#настроика-графического-интерфеиса-в-ren-py" class="router-link-active router-link-exact-active sidebar-item" aria-label="Настройка графического интерфейса в Ren’Py"><!--[--><!--]--> Настройка графического интерфейса в Ren’Py <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><li><a href="/book-game-development-renpy/chapter_6.html" class="sidebar-item sidebar-heading" aria-label="Глава 6."><!--[--><!--]--> Глава 6. <!--[--><!--]--></a><!----></li><li><a href="/book-game-development-renpy/chapter_7.html" class="sidebar-item sidebar-heading" aria-label="Глава 7."><!--[--><!--]--> Глава 7. <!--[--><!--]--></a><!----></li><li><a href="/book-game-development-renpy/chapter_8.html" class="sidebar-item sidebar-heading" aria-label="Глава 8."><!--[--><!--]--> Глава 8. <!--[--><!--]--></a><!----></li><li><a href="/book-game-development-renpy/sources.html" class="sidebar-item sidebar-heading" aria-label="Источники"><!--[--><!--]--> Источники <!--[--><!--]--></a><!----></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="глава-5-погружаемся-глубже" tabindex="-1"><a class="header-anchor" href="#глава-5-погружаемся-глубже" aria-hidden="true">#</a> Глава 5. Погружаемся глубже</h1><p>Дойдя до этой главы, вы уже усвоили базовые теоретические и практические знания по <em>Ren’Py</em>, <em>Twine</em> и <em>TyranoBuilder</em>. Теперь познакомимся с более сложными инструментами, которые имеются в рассматриваемом программном обеспечении. Например, разберём, как интегрировать видео в Ren’Py, как улучшить игры на Twine при помощи каскадных таблиц стилей (CSS), и как создать произвольный диалог в TyranoBuilder.</p><h2 id="ren-py-контеинеры-и-кодеки" tabindex="-1"><a class="header-anchor" href="#ren-py-контеинеры-и-кодеки" aria-hidden="true">#</a> Ren’Py, контейнеры и кодеки</h2><p>Информация о форматах видео, по сути, не касается Ren’Py, TyranoBuilder или Twine, но она может оказаться полезной при работе с аудиовизуальными эффектами в проекте.</p><p>Видео (и аудио) файл обычно состоит из двух компонентов это контейнер и кодек. Контейнер — это файл, который содержит в себе видео, аудио и субтитры. В свою очередь кодек является инструментом для сжатия и распаковки видеофайла внутри контейнера. Существует многое количество кодеков, которые различаются между собой качеством и коэффициентом сжатия. Самыми популярными форматы контейнеров являются <em>.ogg</em>, <em>.webm</em> и <em>.avi</em>, и соответственно они имеют поддержку на многих платформах как на настольных, так и на мобильных.</p><p>Что касается кодеков, то хорошим выбором является <em>H.264</em> (известный как <em>MPEG-4</em>), <em>MPEG-2</em> и <em>MPEG-1</em>. Данный формат был разработан в 1988 году <em>Хироси Ясудой</em> и <em>Леонардо Кьярильоне</em>, а аббревиатура <em>MPEG (Moving Picture Experts Group)</em> расшифровывается как <em>Экспертная группа по движущимся изображениям</em>.</p><p>Давайте, используя таблицу 5-1, сравним самые распространённые кодеки:</p><p><strong>Таблица 5-1.</strong> Наиболее распространенные видеокодеки</p><table><thead><tr><th>Кодек</th><th>Лицензия</th><th>Дата релиза</th><th>Особенности</th></tr></thead><tbody><tr><td><em>VP9</em></td><td>Свободная</td><td>2012</td><td>Поддержка видео высокого разрешения (например, 4K/8K UHD), опция сжатия без потерь</td></tr><tr><td><em>VP8</em></td><td>Свободная</td><td>2008</td><td>Поддержка многопроцессорности. Свободный доступ для редактирования видео. Лучше всего использовать для видео с низким разрешением</td></tr><tr><td><em>Theora</em></td><td>Свободная</td><td>2004</td><td>Поддерживает потоковую передачу видео через Интернет, достоянная картинка при низком битрейте</td></tr><tr><td><em>H.264 (MPEG-4)</em></td><td>Бесплатная для использования в Интернете</td><td>2003</td><td>Эффективен для потокового видео через Интернет, поддерживает разрешение до 8192 × 4320 (включая 8K UHD)</td></tr><tr><td><em>Xvid, бесплатная реализация MPEG-4 part 2</em></td><td>Свободная (Универсальная общественная лицензия GNU)</td><td>2001</td><td>Оптимизирована производительность, широкая поддержка</td></tr><tr><td><em>MPEG-2</em></td><td>Все американские патенты MPEG-2 истекли 13 февраля 2019 года</td><td>1996</td><td>Формат золотой стандарт DVD, может включать объемный звук 5.1</td></tr><tr><td><em>MPEG-1</em></td><td>Свободная (срок действия патентов истек)</td><td>1989</td><td>Хорошо работает с видео с низким битрейтом (например, для небольших дисплеев), принимая во внимание как качество изображения, так и небольшой размер файла.</td></tr></tbody></table><p>Теперь при помощи таблицы 5-2 сравним форматы контейнеров:</p><p><strong>Таблица 5-2.</strong> Наиболее распространенные видео контейнеры</p><table><thead><tr><th>Формат контейнера</th><th>Лицензия</th><th>Дата релиза</th><th>Поддерживаемые кодеки</th></tr></thead><tbody><tr><td><em>WebM</em></td><td>Свободная</td><td>2010</td><td>Видео VP8 и VP9, аудио Ogg Vorbis и Opus audio</td></tr><tr><td><em>Matroska</em></td><td>Свободная</td><td>2002</td><td>Любой</td></tr><tr><td><em>Ogg</em></td><td>Свободная</td><td>1993</td><td>Видео Theora и Dirac. Аудио Opus, Vorbis и Speex</td></tr><tr><td><em>MPEG-контейнер (не путать с MPEG-кодеками)</em></td><td>Ограниченна</td><td>1993</td><td>Видео MPEG-1 и MPEG-2. Аудио MPEG-1 Layers 1, 2, и 3 (то есть mp3)</td></tr><tr><td><em>AVI</em></td><td>Относительно свободная</td><td>1992</td><td>В основном содержит несжатое видео (Full Frame), Intel Real Time (Indeo) и Cinepak</td></tr></tbody></table><h3 id="видео-в-ren-py" tabindex="-1"><a class="header-anchor" href="#видео-в-ren-py" aria-hidden="true">#</a> Видео в Ren’Py</h3><p>Воспроизвести видео в Ren’Py относительно простая задача. Благодаря поддержке нескольких широко распространённых видеоформатов, вам не придётся прибегать к трудному процессу преобразованию видео из одного формата в другой.</p><p>Следующая строка кода, добавленная в сценарий, воспроизведёт видео во весь размер окна игры:</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>$ renpy<span class="token punctuation">.</span>movie_cutscene<span class="token punctuation">(</span><span class="token string">&quot;introvideo.webm&quot;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Видео будет проигрываться до тех пор, пока не достигнет своего конца или пока игрок не щелкнет мышью. Но этим Ren’Py не ограничивается. Вы можете использовать видео как фон или как изображение персонажа.</p><p>Давайте рассмотрим пример:</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>    image markus movie <span class="token operator">=</span> Movie<span class="token punctuation">(</span>play<span class="token operator">=</span><span class="token string">&quot;markus_movie.webm&quot;</span><span class="token punctuation">,</span> mask<span class="token operator">=</span><span class="token string">&quot;markus_mask.webm&quot;</span><span class="token punctuation">)</span>
    show markus movie
    <span class="token string">&quot;Разве это не весело?&quot;</span>
    hide markus movie
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Данный код в первой строке определяет <em>видео спрайт</em> (<em>movie sprite</em>) с именем &quot;markus&quot;, которому присваивается видеофайл <em>markus_movie.webm</em>. Далее командой show воспроизводиться видео. Потом выводиться диалог, а затем видео скрывается командой hide.</p><p>Как мы знаем видео имеет квадратную или прямоугольную форму и не имеет прозрачности. Чтобы скрыть нежелательные края или фон в видео спрайте во время вызова метода Movie указывается параметр <em>mask</em> (<em>маска</em>). <em>Маска</em> – это видео такого же размера и продолжительности, что и видео, с которым она связана.</p><p>Что касается Ren’Py, то в маске белый цвет обозначает видимую область, а черный — область, которую нужно скрыть.</p><h3 id="расширенные-функции-аудио-в-ren-py" tabindex="-1"><a class="header-anchor" href="#расширенные-функции-аудио-в-ren-py" aria-hidden="true">#</a> Расширенные функции аудио в Ren’Py</h3><p>Во время разработки игры возникает потребность одновременно воспроизводить фоновую музыку, звуковые эффекты, голоса персонажей. Для это в Ren&#39;Py используется подход, при котором один аудиоканал используется для воспроизведения музыки, второй для звука, и ещё один для голоса. Каждый из этих каналов воспроизводит по одному аудиофайлу за раз. Если вам потребуется дополнительный аудиоканал вы можете его создать. Как это сделать будет показано далее в книге.</p><p>Нижеприведённом примере используются сразу все три канала для одновременного воспроизведения песни, звукового эффекта и диалога.</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>    play music <span class="token string">&quot;song1.ogg&quot;</span>
    play sound <span class="token string">&quot;boom.mp3&quot;</span>
    voice <span class="token string">&quot;dialogue1.ogg&quot;</span>
    <span class="token string">&quot;Привет, как ты?&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Ren’Py поддерживает <em>.wav</em>, <em>.ogg</em>, <em>.mp3</em> и <em>Opus</em> форматы. Из них формат .wav (который является стандартным аудио форматом для компакт-дисков), пожалуй, самый громоздкий, так как не имеет сжатия, его не рекомендуется для использования в релизной версии игры. Никто не любит, когда игра занимает много дискового пространства, а особенно когда она распространяется через Интернет (то есть будет долго загружаться). Наилучшее применение .wav формата – это когда звук находится на стадии обработки, и только после выполнения всех работ, его можно сохранить в формат с элементом сжатие. Имейте виду, при сжатии идёт потеря качества аудиодорожки, в результате вы получаете копию, а не оригинал. Если это повторить несколько раз, то качество звука сильно упадёт.</p><h4 id="аудио-очереди" tabindex="-1"><a class="header-anchor" href="#аудио-очереди" aria-hidden="true">#</a> Аудио очереди</h4><p>Игра будет более приятно восприниматься, когда в место одной короткой повторяющейся мелодии будет плейлист с разнообразной музыкой. Это можно легко сделать в Ren’Py при помощи метода <em>queue</em>. В примере показано, как создается очередь из трех мелодий (в формате .ogg) для музыкального канала.</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>queue music <span class="token punctuation">[</span> <span class="token string">&quot;song1.ogg&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;song2.ogg&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;happysong.ogg&quot;</span> <span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="параметры-операторов-воспроизведения-и-остановки" tabindex="-1"><a class="header-anchor" href="#параметры-операторов-воспроизведения-и-остановки" aria-hidden="true">#</a> Параметры операторов воспроизведения и остановки</h4><p>Оператор play не ограничивается простым открытием файла и его воспроизведением. Например, вы можете передать в него очередь аудиофайлов, задать затухание в начале и в конце.</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>play music <span class="token punctuation">[</span> <span class="token string">&quot;song1.mp3&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;song2.mp3&quot;</span> <span class="token punctuation">]</span> fadeout <span class="token number">2.0</span> fadein <span class="token number">2.0</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Если вы хотите остановить воспроизведение музыкального канала с затуханием длиной в 10 секунд, то нужно в операторе stop указать следующие параметры:</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>stop music fadeout <span class="token number">10.0</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Если вам когда-нибудь понадобится вставить паузу перед воспроизведением, то воспользуйтесь тегом silence (тишина) с параметром длительность тишины в секундах.</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>play audio <span class="token punctuation">[</span> <span class="token string">&quot;&lt;silence 2.5&gt;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;song1.mp3&quot;</span> <span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="воспроизводим-произвольную-часть-аудиофаила" tabindex="-1"><a class="header-anchor" href="#воспроизводим-произвольную-часть-аудиофаила" aria-hidden="true">#</a> Воспроизводим произвольную часть аудиофайла</h4><p>Ren’Py при помощи оператора from позволяет прослушать часть аудиофайла. В приведённом примере воспроизводиться аудио <em>song1.mp3</em> с 2,5 секунды до 10,5 секунды.</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>play music <span class="token string">&quot;&lt;from 2.5 to 10.5&gt;song1.mp3&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="подробнеи-о-графике" tabindex="-1"><a class="header-anchor" href="#подробнеи-о-графике" aria-hidden="true">#</a> Подробней о графике</h3><p>Ren&#39;Py может не только скрывать и показывать изображения, а имеет ряд дополнительных методов для работы с ними. Давайте познакомимся с наиболее полезными.</p><h4 id="цвет-диалога" tabindex="-1"><a class="header-anchor" href="#цвет-диалога" aria-hidden="true">#</a> Цвет диалога</h4><p>В предыдущей главе мы уже встречались с инициализацией персонажа и это выглядело так:</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>$ m <span class="token operator">=</span> Character<span class="token punctuation">(</span><span class="token string">&#39;Маркус&#39;</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">&quot;#EE1100&quot;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Но в этот раз мы указали свойство color, которое задает цвет диалога персонажа в виде шестнадцатеричного значения. Оно в свою очередь состоит из красного, зеленого и синего цвета (т. е. RGB). Первые два символа после хэштега (#) задают значение красного цвета, третий и четвертый задают значение зеленого, а остальные символы задают значение синего цвета. Так как шестнадцатеричная система в качестве цифр счисления использует цифры от 0 до 9 и латинские буквы от A до F, то мы видим буквенные значения в определении цвета.</p><p>Такую же цветовую модель используют в HTML, CSS и во всех игровых движках, описанных в этой книге. В нашем примере персонажу Маркуса указывается красный цвет диалога с вкраплением зелёного.</p><p>Давайте познакомимся с наиболее распространёнными цветами типа RGB (см. Таблице 5-3).</p><p><strong>Таблица 5-3.</strong> Наиболее популярные RGB цвета</p><table><thead><tr><th>Цвет</th><th>Шестнадцатеричное значение</th></tr></thead><tbody><tr><td><em>Черный</em></td><td>#000000</td></tr><tr><td><em>Белый</em></td><td>#FFFFFF</td></tr><tr><td><em>Серый</em></td><td>#808080</td></tr><tr><td><em>Зеленый</em></td><td>#008000</td></tr><tr><td><em>Синий</em></td><td>#0000FF</td></tr><tr><td><em>Желтый</em></td><td>#FFFF00</td></tr><tr><td><em>Красный</em></td><td>#FF0000</td></tr><tr><td><em>Фиолетовый</em></td><td>#800080</td></tr><tr><td><em>Апельсин</em></td><td>#FFA500</td></tr><tr><td><em>Берливуд</em></td><td>#DEB887</td></tr></tbody></table><h4 id="выравнивание-изображения" tabindex="-1"><a class="header-anchor" href="#выравнивание-изображения" aria-hidden="true">#</a> Выравнивание изображения</h4><p>Если вам нужно отцентрировать изображение в независимости от позиции в пикселях, то укажите следующие параметры <em>xalign</em> и <em>yalign</em>. Параметр xalign задает выравнивание по горизонтали, если указать 0,0 — изображение выровняется по левому краю, если указать 0,5 — то по центру, если 1,0 — то по правому краю. Соответственно параметр yalign выполняет выравнивание по вертикали, если указать 0,0 – выполниться выравнивание по верхнему краю, 0,5 — по центру, а значение 1,0 выровняет изображение по нижнему краю экрана.</p><p>В следующей строке кода загружается файла <em>man.png</em>, который при выводе на экран отображаться в нижнем правом углу.</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>image man right <span class="token operator">=</span> Image<span class="token punctuation">(</span><span class="token string">&quot;man.png&quot;</span><span class="token punctuation">,</span> xalign<span class="token operator">=</span><span class="token number">1.0</span><span class="token punctuation">,</span> yalign<span class="token operator">=</span><span class="token number">1.0</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="добавляем-переходы" tabindex="-1"><a class="header-anchor" href="#добавляем-переходы" aria-hidden="true">#</a> Добавляем переходы</h4><p>Ren’Py имеет набор переходов между сценами. Чтобы их применить используется функция <em>with</em>. Если нужно настроить переходы для глобальных элементов игры используйте конфигурационные файлы <em>gui.rpy</em> или <em>options.rpy</em>.</p><p>Рассмотрим пример использования перехода:</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>show bg garage
<span class="token keyword">with</span> dissolve
<span class="token string">&quot;Черт возьми! Эрни! Мы в гараже!&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Как видим скрипт выводит фоновое изображение гаража, используя классический переход <em>dissolve</em> (<em>растворение</em>).</p><p>Теперь давайте рассмотрим какие есть ещё переходы в Ren’Py (см. Таблицу 5-4).</p><p><strong>Таблица 5-4.</strong> Основные визуальные переходы в Ren’Py</p><table><thead><tr><th>Переход</th><th>Описание</th></tr></thead><tbody><tr><td><em>dissolve</em></td><td>Изображение исчезает или показывается с затуханием</td></tr><tr><td><em>fade</em></td><td>Изображение, темнея исчезает или появляется из темноты</td></tr><tr><td><em>pixellate</em></td><td>Изображение пикселизируется при исчезновении или депикселизируется при появлении</td></tr><tr><td><em>blinds</em></td><td>Смена сцены при помощи эффекта &quot;вертикальные жалюзи&quot;</td></tr><tr><td><em>zoomin</em></td><td>Новое изображение появляется с эффектом увеличения</td></tr><tr><td><em>zoominout</em></td><td>Изображение исчезает с эффектом уменьшения</td></tr><tr><td><em>move</em></td><td>Анимирует перемещение изображения изменившее местоположение</td></tr><tr><td><em>slideawayleft</em>, <em>slideawayright</em>, <em>slideawayup</em>, <em>slideawaydown</em></td><td>Сдвигает старую сцену в заданном направлении</td></tr><tr><td><em>slideleft</em>, <em>slideright</em>, <em>slideup</em>, <em>slidedown</em></td><td>Сдвигает новую сцену в заданном направлении</td></tr><tr><td><em>Vpunch</em></td><td>При вызове этого перехода встряхивает экран в вертикальном направлении</td></tr><tr><td><em>Hpunch</em></td><td>При вызове этого перехода встряхивает экран в горизонтальном направлении</td></tr><tr><td><em>easeinleft</em>, <em>easeinright</em>, _easeintop, <em>easeinbottom</em></td><td>Похож на move, за исключением того, что скорость движения строится на основе кривой косинуса</td></tr><tr><td><em>irisin</em>, <em>irisout</em></td><td>Показывает новое изображение или скрывает текущее с помощью прямоугольника</td></tr><tr><td><em>Squares</em></td><td>Переход изображения квадратами</td></tr><tr><td><em>wipeleft</em>, <em>wiperight</em>, <em>wipeup</em>, <em>wipedown</em></td><td>Стирает изображение в указанном направлении</td></tr><tr><td><em>moveoutright</em>, <em>moveoutleft</em>, <em>moveouttop</em>, <em>moveoutbottom</em></td><td>Перемещает изображение за пределы экрана</td></tr><tr><td><em>moveinright</em>, <em>moveinleft</em>, <em>moveintop</em>, <em>moveinbottom</em></td><td>Переход выводит изображения на экран с соответствующей стороны</td></tr></tbody></table><p>Лучшим способом познакомиться с переходами в Ren’Py, — это, поэкспериментировать с ними. Никогда не знаешь, какую можно получить атмосферу в сцене комбинируя их.</p><h3 id="настроика-графического-интерфеиса-в-ren-py" tabindex="-1"><a class="header-anchor" href="#настроика-графического-интерфеиса-в-ren-py" aria-hidden="true">#</a> Настройка графического интерфейса в Ren’Py</h3></div><!--[--><!--]--></div><footer class="page-meta"><!----><!----><!----></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/book-game-development-renpy/chapter_4.html" class="" aria-label="Глава 4. Знакомимся с Ren’Py, Twine и TyranoBuilder"><!--[--><!--]--> Глава 4. Знакомимся с Ren’Py, Twine и TyranoBuilder <!--[--><!--]--></a></span><span class="next"><a href="/book-game-development-renpy/chapter_6.html" class="" aria-label="Глава 6."><!--[--><!--]--> Глава 6. <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/book-game-development-renpy/assets/app-160a7650.js" defer></script>
  </body>
</html>
